{"version":3,"sources":["utils/openapi.js","media/logo.svg","containers/app/header/Auth.js","containers/app/Header.js","components/ErrorBoundary.jsx","containers/app/body/PhotoItem.js","containers/app/Body.js","actions/actionTypes.js","actions/pageActions.js","utils/VK_init.js","containers/App.js","actions/userActions.js","reducers/user.js","reducers/page.js","reducers/index.js","store/configureStore.js","index.js"],"names":["w","fastXDM","handlers","proxyToServer","onEnvLoad","env","_id","helperUrl","Server","methods","filter","options","this","id","key","i","Math","ceil","random","toString","genKey","frameName","server","__fxdm_i","getEnv","method","protocol","send","json","stringify","callMethod","apply","arguments","bind","run","onInit","applyMethod","Client","client","window","name","indexOf","Error","substr","caller","parent","frames","frame","contentWindow","on","onClientStart","setTimeout","onMessage","e","data","String","self","origin","setJSON","getJSON","callback","getProxyToServer","setEnv","exEnv","envLoaded","_q","act","push","len","length","waitFor","prototype","start","obj","count","onServerStart","destroy","append","attrs","div","document","createElement","innerHTML","firstChild","frameBorder","extend","insertBefore","args","Array","slice","call","shift","funcsCount","func","funcName","_func","safe","walkVar","xdm","isUnsafeMethod","unsafeMethods","JSON","parse","a","replace","_needJSON","postMessage","strData","win","addEventListener","attachEvent","_onlyJSON","attachScript","prop","url","newScript","type","src","getElementsByTagName","appendChild","value","clean","newValue","Object","k","hasOwnProperty","loaded","sameOrigin","funcNum","unshift","obj1","obj2","VK","MD5","n","o","j","r","q","p","v","u","g","h","c","m","t","s","charCodeAt","charAt","fromCharCode","l","A","z","y","b","f","target","source","overwrite","_domain","base","login","main","api","xdConnectionCallbacks","pop","Widgets","_constructor","obj2qs","qs","encodeURIComponent","join","version","_apiId","_session","_userStatus","_path","proxy","_rootId","_nameTransportPath","xdReady","access","FRIENDS","PHOTOS","AUDIO","VIDEO","MATCHES","QUESTIONS","WIKI","init","body","root","apiId","onlyWidgets","nameTransportPath","getElementById","childNodes","style","position","top","session","Cookie","load","Auth","_loadState","setSession","cookie","match","decode","secret","expire","parseInt","location","hostname","setRaw","val","ts","domain","time","rawCookie","exp","Date","getTime","toGMTString","set","resp","encode","clear","params","pairs","sort","str","pair","parts","split","decodeURIComponent","Api","_headId","_callbacks","ie6_7","ieTested","isIE6_7","navigator","userAgent","supportCORS","XMLHttpRequest","XDomainRequest","makeRequest","cb","xhr","createRequest","onload","text","responseText","status","console","error","response","onerror","open","withCredentials","setAttribute","checkMethod","queryTry","toLowerCase","methodAccess","queryParams","query","timer","validAttacheRegexp","validAttachments","attachments","attachment","attach","trim","test","widget","aid","message","method_access","owner_id","publish_date","UI","popup","width","height","setInterval","active","closed","clearInterval","group_id","responseCb","method_force","Observer","subscribe","authFunc","result","unsubscribe","getLoginStatus","queryLength","useXDM","rnd","sid","access_token","error_code","repeatCall","XDM","remote","lsCb","settings","logout","both","mid","sessionChange","statusChange","publish","authCallback","popupOpened","popupCheck","revokeGrants","onLogout","getSession","force","loginCallback","eval","auth","user","sig","App","_appOpened","_addToGroupPopup","_openApp","box","request","arg","undefined","Util","Box","closeExternalApp","_result","hide","externalAppDone","noCloseLayer","show","addToGroup","appId","_onAddToGroupDone","removeEvent","event","app_id","group_ids","addEvent","_buttons","features","screenX","screenLeft","screenY","screenTop","outerWidth","clientWidth","outerHeight","clientHeight","left","screen","button","el","handler","html","index","offsetWidth","_change","state","row","rows","elems","cells","elem","backgroundColor","borderTopColor","borderLeftColor","borderRightColor","borderBottomColor","backgroundPosition","xdHandler","code","_subscribers","_subscribersMap","eventName","subscribers","RPC","loading","enabled","background","Comments","objId","page","pData","getPageData","parseOptions","rpc","limit","mini","norealtime","mouseup","move","browse","replies","pageUrl","host","status_publish","autoPublish","title","pageTitle","description","pageDescription","image","pageImage","onChange","showBox","props","getAbsUrl","startDrag","cursorBack","cursor","stopDrag","startHeight","minWidth","CommentsBrowse","Recommended","max","verb","period","Post","ownerId","postId","hash","post_id","from","Like","instances","buttonIfr","buttonRpc","tooltipIfr","tooltipRpc","checkTO","verticalBtnHeightWidth","18","20","22","24","30","allowTransparency","autoWidth","btnHeight","size","color","ttHere","isOver","hideTimeout","showTooltip","display","getAttribute","clearTimeout","scrollTop","getScrollTop","documentElement","objPos","getXY","fixed","startY","tooltipPos","ss","opacity","hideTooltip","auto_width","widgetId","initTooltip","counter","scrolling","padding","border","zIndex","overflow","onmouseover","onmouseout","parentNode","removeChild","destroyAll","Poll","pollId","poll_id","href","preview","is_preview","share","mode","min","Community","Group","gid","wall","color1","color2","color3","class_name","no_head","no_cover","wide","makeAuth","onAuth","authUrl","vars","Subscribe","oid","soft","ContactUs","Bookmarks","Playlist","playlistId","pid","Ads","paramsExtra","iframe","defaults","funcs","adsParams","adsParamsLocal","adsParamsDefault","keyFix","arr","getBoundingClientRect","rect","ads_ad_unit_width_auto","floor","right","ads_ad_unit_height_auto","bottom","ads_ad_unit_width","ads_ad_unit_height","ads_handler","ads_handler_empty_html","noDefaultParams","adsOnInit","errorCode","adsParamsExport","adsProcessParams","onAdsReady","adsProcessHandler","newAdsOnInitLoader","deps","adsScriptData","vk__adsLight","userHandlers","attachScriptFunc","addScript","isArray","forEach","adsScriptVersion","jsc","adsAttachScript","paramName","paramValue","handlerResult","isFunction","isString","handlerFuncs","Function","e2","adsEvalHandler","log","ads_ad_unit_id","handlerHtml","iframeHandlerHtml","iframeHandler","fixIframeHeight","heightFix","round","vk_ads_html_handler","adsInsertHtmlHandler","AllowMessagesFromCommunity","groupId","Article","Podcast","episode","CommunityMessages","wCur","BUTTONS_CONF","no_button","blue_circle","margin","BUTTON_POSITIONS","expandTimeout","expanded","from_dev","localStorage","getItem","lsGet","shown","welcomeScreen","disable_welcome_screen","ref_source_info","ref_source_link","buttonType","keys","disableButtonTooltip","disable_tooltip","tooltipButtonText","tooltip_text","disableNewMessagesSound","disable_new_messages_sound","no_loading","widgetPosition","chatRpc","chatIfr","curBox","ttSize","changeWidgetPosition","button_position","inited","timers","startTitleNotify","fast","titleTimer","changeTitleMode","oldTitle","stopTitleAnimation","disableTitleChange","expand","minimize","btnConf","boxShadow","updateWidgetPosition","callRpcMethod","conf","expandChat","opts","showTimer","setSourceData","link","onStartLoading","onReady","playSong","disableExpandChatSound","noSaveState","setTooltipSize","setItem","removeItem","canNotWrite","onCanNotWrite","fatalError","public_id","referrer_domain","query_str","setPageTitle","resetPageTitle","newMessage","hasFocus","changeButtonPosition","widgetUrl","onDone","iter","urlQueryString","encodedParam","maxWidth","startWidth","_iframeAppWidget","iframe_app","referrer","showLoader","enable","Loader","resize","resizeWidget","newWidth","newHeight","widgetElem","isFinite","onResizeWidget","updateVersion","ver","custom_style","_pData","metaName","metas","content","_browserHash","loc","getStyle","ret","defaultView","getComputedStyle","computedStyle","getPropertyValue","currentStyle","camelCase","all","letter","toUpperCase","base_domain","login_domain","offsetParent","offsetLeft","offsetTop","scrollLeft","pageYOffset","scrollNode","pageXOffset","loader","sizes","fnc","overflowB","is_vk","visibility","className","tempHide","removeEventListener","detachEvent","styles","Retargeting","pixelCode","Init","Event","metatagUrl","metatagTitle","Image","Hit","Add","audienceID","ProductEvent","priceListID","canShowErrors","show_errors","errorsIgnore","errors_ignore","productParams","requestParams","products_event","price_list_id","metatag_url","metatag_title","products_params","requestUrl","map","errors","showErrors","errorBegin","errorsLength","Pixel","constructor","Goal","conversionName","parameters","pixel","parseFloat","vkAsyncInit","vkAsyncInitCallbacks","stManager","done","checked","isAuthorized","htmlFor","Header","RenderTemplate","isFetching","logo","alt","ErrorBoundary","hasError","errorInfo","children","React","Component","PhotoItem","photo","likes","Body","onBtnYearClick","_year","currentTarget","innerText","search_mid","getPhotos","setSearchMID","onClick","year","photos","GET_PHOTOS_REQUEST","GET_PHOTOS_SUCCESS","GET_PHOTOS_FAIL","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_REQUEST","LOGOUT_SUCCESS","LOGOUT_FAIL","SET_SEARCH_MID","photosArr","getMorePhotos","offset","dispatch","extended","items","selectedYear","yearPhotos","item","date","getFullYear","makeYearPhotos","payload","connect","store","username","first_name","initialState","rootReducer","combineReducers","action","createStore","applyMiddleware","thunk","logger","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.48a9b7e1.chunk.js","sourcesContent":["/*eslint-disable*/\n(function (w) {\n    if (w.fastXDM) return;\n\n    var handlers = {};\n    var proxyToServer = {};\n    var onEnvLoad = [];\n    var env = {};\n\n    // Key generation\n    function genKey() {\n        var key = \"\";\n        for (var i = 0; i < 5; i++) {\n            key += Math.ceil(Math.random() * 15).toString(16);\n        }\n        return key;\n    }\n\n    function waitFor(obj, prop, func, self, count) {\n        if (obj[prop]) {\n            func.apply(self);\n        } else {\n            count = count || 0;\n            if (count < 1000) {\n                setTimeout(function () {\n                    waitFor(obj, prop, func, self, count + 1);\n                }, 0);\n            }\n        }\n    }\n\n    function attachScript(url) {\n        setTimeout(function () {\n            var newScript = document.createElement(\"script\");\n            newScript.type = \"text/javascript\";\n            newScript.src = url || w.fastXDM.helperUrl;\n            waitFor(document, \"body\", function () {\n                document.getElementsByTagName(\"HEAD\")[0].appendChild(newScript);\n            });\n        }, 0);\n    }\n\n    function walkVar(value, clean) {\n        var newValue;\n\n        switch (typeof value) {\n            case \"string\":\n                if (clean) {\n                    newValue = value.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#039;\");\n                } else {\n                    newValue = value\n                        .replace(/&#039;/g, \"'\")\n                        .replace(/&quot;/g, '\"')\n                        .replace(/&gt;/g, \">\")\n                        .replace(/&lt;/g, \"<\")\n                        .replace(/&amp;/g, \"&\");\n                }\n                break;\n            case \"object\":\n                if (Object.prototype.toString.apply(value) === \"[object Array]\") {\n                    newValue = [];\n                    for (var i = 0, len = value.length; i < len; i++) {\n                        newValue[i] = walkVar(value[i], clean);\n                    }\n                } else {\n                    newValue = {};\n                    for (var k in value) {\n                        if (Object.hasOwnProperty.call(value, k)) {\n                            newValue[k] = walkVar(value[k], clean);\n                        }\n                    }\n                }\n                break;\n            default:\n                newValue = value;\n                break;\n        }\n\n        return newValue;\n    }\n\n    // Env functions\n    function getEnv(callback, self) {\n        if (env.loaded) {\n            callback.apply(self, [env]);\n        } else {\n            onEnvLoad.push([self, callback]);\n        }\n    }\n\n    function envLoaded() {\n        env.loaded = true;\n\n        for (var i = 0, len = onEnvLoad.length; i < len; i++) {\n            onEnvLoad[i][1].apply(onEnvLoad[i][0], [env]);\n        }\n    }\n\n    function applyMethod(strData, self, origin) {\n        getEnv(function (env) {\n            var data = env.json.parse(strData);\n            var method = data[0];\n\n            if (method) {\n                if (env.protocol === \"p\" && self.options.sameOrigin && origin !== w.origin && !self.isUnsafeMethod(method)) {\n                    throw Error(\"Insecure method call.\");\n                }\n\n                if (!data[1]) data[1] = [];\n\n                for (var i = 0, len = data[1].length; i < len; i++) {\n                    if (data[1][i] && data[1][i]._func) {\n                        var funcNum = data[1][i]._func;\n                        data[1][i] = function () {\n                            var args = Array.prototype.slice.call(arguments);\n                            args.unshift(\"_func\" + funcNum);\n                            self.callMethod.apply(self, args);\n                        };\n                    } else if (self.options.safe) {\n                        data[1][i] = walkVar(data[1][i], true);\n                    }\n                }\n\n                setTimeout(function () {\n                    if (!self.methods[method]) {\n                        throw Error(\"fastXDM: Method \" + method + \" is undefined\");\n                    }\n                    self.methods[method].apply(self, data[1]);\n                }, 0);\n            }\n        });\n    }\n\n    function extend(obj1, obj2) {\n        for (var i in obj2) {\n            if (obj1[i] && typeof obj1[i] === \"object\") {\n                extend(obj1[i], obj2[i]);\n            } else {\n                obj1[i] = obj2[i];\n            }\n        }\n    }\n\n    // XDM object\n    w.fastXDM = {\n        _id: 0,\n        helperUrl: \"https://vk.com/js/api/xdmHelper.js\",\n\n        Server: function (methods, filter, options) {\n            this.methods = methods || {};\n            this.filter = filter;\n            this.options = options || {};\n            this.id = w.fastXDM._id++;\n            this.key = genKey();\n            this.frameName = \"fXD\" + this.key;\n            this.server = true;\n\n            this.methods[\"%init%\"] = this.methods.__fxdm_i = function () {\n                getEnv(function (env) {\n                    for (var method in this.methods) {\n                        if (this.methods[method] instanceof w.fastXDM.Server) {\n                            var proxyFromServer = this;\n                            var proxyToServer = this.methods[method];\n\n                            if (env.protocol === \"p\") {\n                                env.send(proxyFromServer, env.json.stringify([\"%proxy%\", [method, proxyToServer.key]]));\n                            }\n\n                            this.methods[method] = function () {\n                                this.callMethod.apply(this, arguments);\n                            }.bind(proxyToServer);\n                        }\n                    }\n                }, this);\n\n                w.fastXDM.run(this.id);\n                if (this.methods.onInit) {\n                    this.methods.onInit();\n                }\n            };\n\n            handlers[this.key] = [applyMethod, this];\n        },\n\n        Client: function (methods, options) {\n            this.methods = methods || {};\n            this.options = options || {};\n            this.id = w.fastXDM._id++;\n            this.client = true;\n\n            w.fastXDM.run(this.id);\n\n            if (window.name.indexOf(\"fXD\") === 0) {\n                this.key = window.name.substr(3);\n            } else {\n                throw Error(\"Wrong window.name property.\");\n            }\n\n            this.caller = window.parent;\n\n            if (!proxyToServer[this.key]) {\n                proxyToServer[this.key] = {};\n            }\n            this.methods[\"%proxy%\"] = function (method, key) {\n                if (method && key && this.caller.frames[\"fXD\" + key]) {\n                    proxyToServer[this.key][method] = {\n                        key: key,\n                        frame: {\n                            contentWindow: this.caller.frames[\"fXD\" + key],\n                        },\n                    };\n                }\n            }.bind(this);\n\n            handlers[this.key] = [applyMethod, this];\n\n            w.fastXDM.on(\n                \"helper\",\n                function () {\n                    w.fastXDM.onClientStart(this);\n                },\n                this\n            );\n\n            getEnv(function (env) {\n                env.send(this, env.json.stringify([\"%init%\"]));\n\n                var methods = this.methods;\n                setTimeout(function () {\n                    if (methods.onInit) {\n                        methods.onInit();\n                    }\n                }, 0);\n            }, this);\n        },\n\n        onMessage: function (e) {\n            var data = e.data;\n            if (!data) {\n                return false;\n            }\n            if (typeof data !== \"string\" && !(data instanceof String)) {\n                return false;\n            }\n\n            var key = data.substr(0, 5);\n            if (handlers[key]) {\n                var self = handlers[key][1];\n                if (self && (!self.filter || self.filter(e.origin))) {\n                    handlers[key][0](data.substr(6), self, e.origin);\n                }\n            }\n        },\n\n        setJSON: function (json) {\n            env.json = json;\n        },\n\n        getJSON: function (callback) {\n            if (!callback) {\n                return env.json;\n            }\n\n            getEnv(function (env) {\n                callback(env.json);\n            });\n        },\n\n        getProxyToServer: function (key, method) {\n            return proxyToServer[key] && proxyToServer[key][method];\n        },\n\n        setEnv: function (exEnv) {\n            for (var i in exEnv) {\n                env[i] = exEnv[i];\n            }\n\n            envLoaded();\n        },\n\n        _q: {},\n\n        on: function (key, act, self) {\n            if (!this._q[key]) this._q[key] = [];\n\n            if (this._q[key] == -1) {\n                act.apply(self);\n            } else {\n                this._q[key].push([act, self]);\n            }\n        },\n\n        run: function (key) {\n            var len = (this._q[key] || []).length;\n            for (var i = 0; i < len; i++) {\n                this._q[key][i][0].apply(this._q[key][i][1]);\n            }\n\n            this._q[key] = -1;\n        },\n\n        waitFor: waitFor,\n    };\n\n    w.fastXDM.Server.prototype.start = function (obj, count) {\n        if (obj.contentWindow) {\n            this.caller = obj.contentWindow;\n            this.frame = obj;\n\n            w.fastXDM.on(\n                \"helper\",\n                function () {\n                    w.fastXDM.onServerStart(this);\n                },\n                this\n            );\n        } else {\n            // Opera old versions\n            var self = this;\n            count = count || 0;\n            if (count < 50) {\n                setTimeout(function () {\n                    self.start.apply(self, [obj, count + 1]);\n                }, 100);\n            }\n        }\n    };\n\n    w.fastXDM.Server.prototype.destroy = function () {\n        delete handlers[this.key];\n    };\n\n    w.fastXDM.Server.prototype.append = function (obj, options, attrs) {\n        var div = document.createElement(\"DIV\");\n        div.innerHTML = '<iframe name=\"' + this.frameName + '\" ' + (attrs || \"\") + \"></iframe>\";\n        var frame = div.firstChild;\n        var self = this;\n\n        setTimeout(function () {\n            frame.frameBorder = \"0\";\n            if (options) extend(frame, options);\n            obj.insertBefore(frame, obj.firstChild);\n            self.start(frame);\n        }, 0);\n\n        return frame;\n    };\n\n    w.fastXDM.Client.prototype.callMethod = w.fastXDM.Server.prototype.callMethod = function () {\n        var args = Array.prototype.slice.call(arguments);\n        var method = args.shift();\n\n        for (var i = 0, len = args.length; i < len; i++) {\n            if (typeof args[i] === \"function\") {\n                this.funcsCount = (this.funcsCount || 0) + 1;\n                var func = args[i];\n                var funcName = \"_func\" + this.funcsCount;\n\n                this.methods[funcName] = function () {\n                    func.apply(this, arguments);\n                    delete this.methods[funcName];\n                };\n\n                args[i] = { _func: this.funcsCount };\n            } else if (this.options.safe) {\n                args[i] = walkVar(args[i], false);\n            }\n        }\n\n        waitFor(\n            this,\n            \"caller\",\n            function () {\n                w.fastXDM.on(\n                    this.id,\n                    function () {\n                        getEnv(function (env) {\n                            var xdm = this;\n                            var proxyToServer = w.fastXDM.getProxyToServer(this.key, method);\n\n                            if (proxyToServer) {\n                                xdm = proxyToServer;\n                                method = args.shift();\n                            }\n\n                            env.send(xdm, env.json.stringify([method, args]));\n                        }, this);\n                    },\n                    this\n                );\n            },\n            this\n        );\n    };\n\n    w.fastXDM.Client.prototype.isUnsafeMethod = w.fastXDM.Server.prototype.isUnsafeMethod = function (method) {\n        return ~[\"%proxy%\", \"%init%\"].indexOf(method) || (this.options.unsafeMethods && ~this.options.unsafeMethods.indexOf(method));\n    };\n\n    if (w.JSON && typeof w.JSON === \"object\" && w.JSON.parse && w.JSON.stringify && w.JSON.stringify({ a: [1, 2, 3] }).replace(/ /g, \"\") === '{\"a\":[1,2,3]}') {\n        env.json = { parse: w.JSON.parse, stringify: w.JSON.stringify };\n    } else {\n        w.fastXDM._needJSON = true;\n    }\n\n    // PostMessage cover\n    if (w.postMessage) {\n        env.protocol = \"p\";\n        env.send = function (xdm, strData) {\n            var win = xdm.frame ? xdm.frame.contentWindow : xdm.caller;\n            if (win) {\n                try {\n                    win.postMessage(xdm.key + \":\" + strData, \"*\");\n                } catch (e) {\n                    window.postMessage.call(win, xdm.key + \":\" + strData, \"*\");\n                }\n            }\n        };\n\n        if (w.addEventListener) {\n            w.addEventListener(\"message\", w.fastXDM.onMessage, false);\n        } else {\n            w.attachEvent(\"onmessage\", w.fastXDM.onMessage);\n        }\n\n        if (w.fastXDM._needJSON) {\n            w.fastXDM._onlyJSON = true;\n            attachScript();\n        } else {\n            envLoaded();\n        }\n    } else {\n        attachScript();\n    }\n})(window);\n\nif (!window.VK) window.VK = {};\n\n/*\n * Based on JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n */\nif (!VK.MD5) {\n    VK.MD5 = function (n) {\n        var j = function (o, r) {\n                var q = (o & 65535) + (r & 65535),\n                    p = (o >> 16) + (r >> 16) + (q >> 16);\n                return (p << 16) | (q & 65535);\n            },\n            g = function (o, p) {\n                return (o << p) | (o >>> (32 - p));\n            },\n            k = function (w, r, p, o, v, u) {\n                return j(g(j(j(r, w), j(o, u)), v), p);\n            },\n            a = function (q, p, w, v, o, u, r) {\n                return k((p & w) | (~p & v), q, p, o, u, r);\n            },\n            h = function (q, p, w, v, o, u, r) {\n                return k((p & v) | (w & ~v), q, p, o, u, r);\n            },\n            c = function (q, p, w, v, o, u, r) {\n                return k(p ^ w ^ v, q, p, o, u, r);\n            },\n            m = function (q, p, w, v, o, u, r) {\n                return k(w ^ (p | ~v), q, p, o, u, r);\n            },\n            b = function (A, u) {\n                var z = 1732584193,\n                    y = -271733879,\n                    w = -1732584194,\n                    v = 271733878,\n                    r,\n                    q,\n                    p,\n                    o;\n                A[u >> 5] |= 128 << u % 32;\n                A[(((u + 64) >>> 9) << 4) + 14] = u;\n                for (var t = 0, s = A.length; t < s; t += 16) {\n                    r = z;\n                    q = y;\n                    p = w;\n                    o = v;\n                    z = a(z, y, w, v, A[t + 0], 7, -680876936);\n                    v = a(v, z, y, w, A[t + 1], 12, -389564586);\n                    w = a(w, v, z, y, A[t + 2], 17, 606105819);\n                    y = a(y, w, v, z, A[t + 3], 22, -1044525330);\n                    z = a(z, y, w, v, A[t + 4], 7, -176418897);\n                    v = a(v, z, y, w, A[t + 5], 12, 1200080426);\n                    w = a(w, v, z, y, A[t + 6], 17, -1473231341);\n                    y = a(y, w, v, z, A[t + 7], 22, -45705983);\n                    z = a(z, y, w, v, A[t + 8], 7, 1770035416);\n                    v = a(v, z, y, w, A[t + 9], 12, -1958414417);\n                    w = a(w, v, z, y, A[t + 10], 17, -42063);\n                    y = a(y, w, v, z, A[t + 11], 22, -1990404162);\n                    z = a(z, y, w, v, A[t + 12], 7, 1804603682);\n                    v = a(v, z, y, w, A[t + 13], 12, -40341101);\n                    w = a(w, v, z, y, A[t + 14], 17, -1502002290);\n                    y = a(y, w, v, z, A[t + 15], 22, 1236535329);\n                    z = h(z, y, w, v, A[t + 1], 5, -165796510);\n                    v = h(v, z, y, w, A[t + 6], 9, -1069501632);\n                    w = h(w, v, z, y, A[t + 11], 14, 643717713);\n                    y = h(y, w, v, z, A[t + 0], 20, -373897302);\n                    z = h(z, y, w, v, A[t + 5], 5, -701558691);\n                    v = h(v, z, y, w, A[t + 10], 9, 38016083);\n                    w = h(w, v, z, y, A[t + 15], 14, -660478335);\n                    y = h(y, w, v, z, A[t + 4], 20, -405537848);\n                    z = h(z, y, w, v, A[t + 9], 5, 568446438);\n                    v = h(v, z, y, w, A[t + 14], 9, -1019803690);\n                    w = h(w, v, z, y, A[t + 3], 14, -187363961);\n                    y = h(y, w, v, z, A[t + 8], 20, 1163531501);\n                    z = h(z, y, w, v, A[t + 13], 5, -1444681467);\n                    v = h(v, z, y, w, A[t + 2], 9, -51403784);\n                    w = h(w, v, z, y, A[t + 7], 14, 1735328473);\n                    y = h(y, w, v, z, A[t + 12], 20, -1926607734);\n                    z = c(z, y, w, v, A[t + 5], 4, -378558);\n                    v = c(v, z, y, w, A[t + 8], 11, -2022574463);\n                    w = c(w, v, z, y, A[t + 11], 16, 1839030562);\n                    y = c(y, w, v, z, A[t + 14], 23, -35309556);\n                    z = c(z, y, w, v, A[t + 1], 4, -1530992060);\n                    v = c(v, z, y, w, A[t + 4], 11, 1272893353);\n                    w = c(w, v, z, y, A[t + 7], 16, -155497632);\n                    y = c(y, w, v, z, A[t + 10], 23, -1094730640);\n                    z = c(z, y, w, v, A[t + 13], 4, 681279174);\n                    v = c(v, z, y, w, A[t + 0], 11, -358537222);\n                    w = c(w, v, z, y, A[t + 3], 16, -722521979);\n                    y = c(y, w, v, z, A[t + 6], 23, 76029189);\n                    z = c(z, y, w, v, A[t + 9], 4, -640364487);\n                    v = c(v, z, y, w, A[t + 12], 11, -421815835);\n                    w = c(w, v, z, y, A[t + 15], 16, 530742520);\n                    y = c(y, w, v, z, A[t + 2], 23, -995338651);\n                    z = m(z, y, w, v, A[t + 0], 6, -198630844);\n                    v = m(v, z, y, w, A[t + 7], 10, 1126891415);\n                    w = m(w, v, z, y, A[t + 14], 15, -1416354905);\n                    y = m(y, w, v, z, A[t + 5], 21, -57434055);\n                    z = m(z, y, w, v, A[t + 12], 6, 1700485571);\n                    v = m(v, z, y, w, A[t + 3], 10, -1894986606);\n                    w = m(w, v, z, y, A[t + 10], 15, -1051523);\n                    y = m(y, w, v, z, A[t + 1], 21, -2054922799);\n                    z = m(z, y, w, v, A[t + 8], 6, 1873313359);\n                    v = m(v, z, y, w, A[t + 15], 10, -30611744);\n                    w = m(w, v, z, y, A[t + 6], 15, -1560198380);\n                    y = m(y, w, v, z, A[t + 13], 21, 1309151649);\n                    z = m(z, y, w, v, A[t + 4], 6, -145523070);\n                    v = m(v, z, y, w, A[t + 11], 10, -1120210379);\n                    w = m(w, v, z, y, A[t + 2], 15, 718787259);\n                    y = m(y, w, v, z, A[t + 9], 21, -343485551);\n                    z = j(z, r);\n                    y = j(y, q);\n                    w = j(w, p);\n                    v = j(v, o);\n                }\n                return [z, y, w, v];\n            },\n            f = function (r) {\n                var q = \"\",\n                    s = -1,\n                    p = r.length,\n                    o,\n                    t;\n                while (++s < p) {\n                    o = r.charCodeAt(s);\n                    t = s + 1 < p ? r.charCodeAt(s + 1) : 0;\n                    if (55296 <= o && o <= 56319 && 56320 <= t && t <= 57343) {\n                        o = 65536 + ((o & 1023) << 10) + (t & 1023);\n                        s++;\n                    }\n                    if (o <= 127) {\n                        q += String.fromCharCode(o);\n                    } else {\n                        if (o <= 2047) {\n                            q += String.fromCharCode(192 | ((o >>> 6) & 31), 128 | (o & 63));\n                        } else {\n                            if (o <= 65535) {\n                                q += String.fromCharCode(224 | ((o >>> 12) & 15), 128 | ((o >>> 6) & 63), 128 | (o & 63));\n                            } else {\n                                if (o <= 2097151) {\n                                    q += String.fromCharCode(240 | ((o >>> 18) & 7), 128 | ((o >>> 12) & 63), 128 | ((o >>> 6) & 63), 128 | (o & 63));\n                                }\n                            }\n                        }\n                    }\n                }\n                return q;\n            },\n            e = function (p) {\n                var o = Array(p.length >> 2),\n                    r,\n                    q;\n                for (r = 0, q = o.length; r < q; r++) {\n                    o[r] = 0;\n                }\n                for (r = 0, q = p.length * 8; r < q; r += 8) {\n                    o[r >> 5] |= (p.charCodeAt(r / 8) & 255) << r % 32;\n                }\n                return o;\n            },\n            l = function (p) {\n                var o = \"\";\n                for (var r = 0, q = p.length * 32; r < q; r += 8) {\n                    o += String.fromCharCode((p[r >> 5] >>> r % 32) & 255);\n                }\n                return o;\n            },\n            d = function (o) {\n                return l(b(e(o), o.length * 8));\n            },\n            i = function (q) {\n                var t = \"0123456789abcdef\",\n                    p = \"\",\n                    o;\n                for (var s = 0, r = q.length; s < r; s++) {\n                    o = q.charCodeAt(s);\n                    p += t.charAt((o >>> 4) & 15) + t.charAt(o & 15);\n                }\n                return p;\n            };\n        return i(d(f(n)));\n    };\n}\n\n/*\n * VKontakte Open API JavaScript library\n * http://vk.com/\n */\n\nVK.extend = function (target, source, overwrite) {\n    for (var key in source) {\n        if (overwrite || typeof target[key] === \"undefined\") {\n            target[key] = source[key];\n        }\n    }\n    return target;\n};\n\nVK.extend(\n    VK,\n    {\n        _domain: {\n            base: \"https://vk.com\",\n            login: \"https://login.vk.com\",\n            main: \"https://oauth.vk.com\",\n            api: \"https://api.vk.com\",\n        },\n    },\n    true\n);\n\nif (!VK.xdConnectionCallbacks) {\n    VK.extend(VK, {\n        version: 1,\n        _apiId: null,\n        _session: null,\n        _userStatus: \"unknown\",\n        _path: {\n            login: \"authorize\",\n            proxy: \"fxdm_oauth_proxy.html\",\n        },\n        _rootId: \"vk_api_transport\",\n        _nameTransportPath: \"\",\n        xdReady: false,\n        access: {\n            FRIENDS: 0x2,\n            PHOTOS: 0x4,\n            AUDIO: 0x8,\n            VIDEO: 0x10,\n            MATCHES: 0x20,\n            QUESTIONS: 0x40,\n            WIKI: 0x80,\n        },\n    });\n\n    VK.init = function (options) {\n        var body, root;\n\n        VK._apiId = null;\n        if (!options.apiId) {\n            throw Error(\"VK.init() called without an apiId\");\n        }\n        VK._apiId = options.apiId;\n\n        if (options.onlyWidgets) return true;\n\n        if (options.nameTransportPath && options.nameTransportPath !== \"\") {\n            VK._nameTransportPath = options.nameTransportPath;\n        }\n\n        root = document.getElementById(VK._rootId);\n        if (!root) {\n            root = document.createElement(\"div\");\n            root.id = VK._rootId;\n            body = document.getElementsByTagName(\"body\")[0];\n            body.insertBefore(root, body.childNodes[0]);\n        }\n        root.style.position = \"absolute\";\n        root.style.top = \"-10000px\";\n\n        var session = VK.Cookie.load();\n        if (session) {\n            VK.Auth._loadState = \"loaded\";\n            VK.Auth.setSession(session, session ? \"connected\" : \"unknown\");\n        }\n    };\n\n    if (!VK.Cookie) {\n        VK.Cookie = {\n            _domain: null,\n            load: function () {\n                var cookie = document.cookie.match(\"\\\\bvk_app_\" + VK._apiId + \"=([^;]*)\\\\b\");\n                var session;\n\n                if (cookie) {\n                    session = this.decode(cookie[1]);\n                    if (session.secret != \"oauth\") {\n                        return false;\n                    }\n                    session.expire = parseInt(session.expire, 10);\n                    VK.Cookie._domain = \".\" + window.location.hostname;\n                }\n\n                return session;\n            },\n            setRaw: function (val, ts, domain, time) {\n                var rawCookie;\n                rawCookie = \"vk_app_\" + VK._apiId + \"=\" + val + \"\";\n                var exp = time ? new Date().getTime() + time * 1000 : ts * 1000;\n                rawCookie += val && ts === 0 ? \"\" : \"; expires=\" + new Date(exp).toGMTString();\n                rawCookie += \"; path=/\";\n                rawCookie += domain ? \"; domain=.\" + domain : \"\";\n                document.cookie = rawCookie;\n\n                this._domain = domain;\n            },\n            set: function (session, resp) {\n                if (session) {\n                    this.setRaw(this.encode(session), session.expire, window.location.hostname, (resp || {}).time);\n                } else {\n                    this.clear();\n                }\n            },\n            clear: function () {\n                this.setRaw(\"\", 0, this._domain, 0);\n            },\n            encode: function (params) {\n                var pairs = [],\n                    key;\n\n                for (key in params) {\n                    if (key != \"user\") pairs.push(encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]));\n                }\n                pairs.sort();\n\n                return pairs.join(\"&\");\n            },\n            decode: function (str) {\n                var params = {},\n                    parts = str.split(\"&\"),\n                    i,\n                    pair;\n\n                for (i = 0; i < parts.length; i++) {\n                    pair = parts[i].split(\"=\", 2);\n                    if (pair && pair[0]) {\n                        params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n                    }\n                }\n\n                return params;\n            },\n        };\n    }\n\n    function obj2qs(obj) {\n        if (!obj) return \"\";\n        var qs = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                qs.push(encodeURIComponent(k) + \"=\" + encodeURIComponent(obj[k].toString() || \"\"));\n            }\n        }\n        return qs.length ? \"?\" + qs.join(\"&\") : \"\";\n    }\n\n    if (!VK.Api) {\n        VK.Api = {\n            _headId: null,\n            _callbacks: {},\n\n            ie6_7: function () {\n                if (!VK.Api.ieTested) {\n                    VK.Api.isIE6_7 = navigator.userAgent.match(/MSIE [6|7]/i);\n                    VK.Api.ieTested = true;\n                }\n                return VK.Api.isIE6_7;\n            },\n\n            supportCORS: function () {\n                var xhr = new XMLHttpRequest();\n                if (\"withCredentials\" in xhr) {\n                    return true;\n                }\n\n                if (typeof XDomainRequest != \"undefined\") {\n                    return true;\n                }\n\n                return false;\n            },\n\n            makeRequest: function (url, cb) {\n                var xhr = VK.Api.createRequest(\"GET\", url);\n                if (!xhr) {\n                    return false;\n                }\n\n                xhr.onload = function () {\n                    var text = xhr.responseText;\n                    if (xhr.status === 200) {\n                        cb(text);\n                    } else {\n                        try {\n                            console.error(\"Open api access error\", xhr.response);\n                        } catch (e) {\n                            //nop\n                        }\n                    }\n                };\n\n                xhr.onerror = function () {\n                    try {\n                        console.error(\"Open api access error\");\n                    } catch (e) {\n                        //nop\n                    }\n                };\n\n                xhr.send();\n                return true;\n            },\n\n            createRequest: function (method, url) {\n                var xhr = new XMLHttpRequest();\n\n                if (\"withCredentials\" in xhr) {\n                    // XHR for Chrome/Firefox/Opera/Safari.\n                    xhr.open(method, url, true);\n                    xhr.withCredentials = true;\n                } else if (typeof XDomainRequest != \"undefined\") {\n                    // XDomainRequest for IE.\n                    xhr = new XDomainRequest();\n                    xhr.open(method, url);\n                    xhr.withCredentials = true;\n                } else {\n                    // CORS not supported.\n                    xhr = null;\n                }\n\n                return xhr;\n            },\n\n            attachScript: function (url) {\n                if (!VK.Api._headId) VK.Api._headId = document.getElementsByTagName(\"head\")[0];\n                var newScript = document.createElement(\"script\");\n                newScript.type = \"text/javascript\";\n                newScript.setAttribute(\"encoding\", \"UTF-8\");\n                newScript.src = url;\n                VK.Api._headId.appendChild(newScript);\n            },\n\n            checkMethod: function (method, params, cb, queryTry) {\n                var m = method.toLowerCase();\n\n                if (m === \"wall.post\") {\n                    var validAttacheRegexp = /(^https?:\\/\\/)|(^(poll|album|photo|video|doc|audio|page|note)-?\\d+_-?\\d+)$/,\n                        validAttachments = [],\n                        methodAccess,\n                        queryParams,\n                        query,\n                        timer;\n\n                    if (!params.v) {\n                        params.v = \"5.95\";\n                    }\n\n                    params.attachments = params.attachments || params.attachment || [];\n                    if (typeof params.attachments === \"string\") {\n                        params.attachments = params.attachments.split(\",\");\n                    }\n\n                    for (var i = 0; i < params.attachments.length; i++) {\n                        var attach = params.attachments[i].trim();\n                        if (validAttacheRegexp.test(attach)) {\n                            validAttachments.push(attach);\n                        }\n                    }\n\n                    params.attachments = validAttachments.length ? validAttachments : \"\";\n                    methodAccess = \"_\" + Math.random().toString(16).substr(2);\n                    queryParams = {\n                        act: \"wall_post_box\",\n                        method: m,\n                        widget: 4,\n                        aid: parseInt(VK._apiId, 10),\n                        text: params.message || \"\",\n                        method_access: methodAccess,\n                    };\n\n                    queryParams = VK.extend(queryParams, params);\n                    queryParams.owner_id = parseInt(params.owner_id || 0, 10);\n                    queryParams.publish_date = params.publish_date || \"\";\n                    query = VK._domain.base + \"/al_apps.php\";\n                    query += obj2qs(queryParams);\n\n                    VK.UI.popup({\n                        url: query,\n                        width: 560,\n                        height: 304,\n                    });\n\n                    timer = setInterval(function () {\n                        if (VK.UI.active.closed) {\n                            clearInterval(timer);\n                            params.method_access = methodAccess;\n                            VK.Api.call(method, params, cb, queryTry);\n                        }\n                    }, 500);\n                    return false;\n                }\n\n                if (m == \"messages.allowmessagesfromgroup\") {\n                    methodAccess = \"_\" + Math.random().toString(16).substr(2);\n                    query =\n                        VK._domain.base +\n                        \"/widget_allow_messages_from_community.php?act=allow_box&group_id=\" +\n                        parseInt(params.group_id, 10) +\n                        \"&app_id=\" +\n                        parseInt(VK._apiId, 10) +\n                        \"&method_access=\" +\n                        methodAccess;\n\n                    VK.UI.popup({\n                        url: query,\n                        width: 560,\n                        height: 304,\n                    });\n\n                    timer = setInterval(function () {\n                        if (VK.UI.active.closed) {\n                            clearInterval(timer);\n                            params.method_access = methodAccess;\n                            VK.Api.call(method, params, cb, queryTry);\n                        }\n                    }, 500);\n\n                    return false;\n                }\n\n                return true;\n            },\n\n            call: function (method, params, cb, queryTry) {\n                var query = params || {},\n                    qs,\n                    responseCb;\n\n                if (typeof query != \"object\" || typeof cb != \"function\") {\n                    return false;\n                }\n                if (!params.method_access && !params.method_force && !VK.Api.checkMethod(method, params, cb, queryTry)) {\n                    return;\n                }\n\n                if (!queryTry) queryTry = 0;\n\n                if (VK.Auth._loadState != \"loaded\") {\n                    var authFunc = function (result) {\n                        if (result && result.session) {\n                            VK.Observer.unsubscribe(\"auth.loginStatus\", authFunc);\n                            VK.Api.call(method, params, cb);\n                        }\n                    };\n                    VK.Observer.subscribe(\"auth.loginStatus\", authFunc);\n                    VK.Auth.getLoginStatus();\n                    return;\n                }\n\n                if (VK.Api.queryLength(query) < 1500 && !VK.Api.ie6_7()) {\n                    var useXDM = false;\n                    var rnd = parseInt(Math.random() * 10000000, 10);\n                    while (VK.Api._callbacks[rnd]) {\n                        rnd = parseInt(Math.random() * 10000000, 10);\n                    }\n                    query.callback = \"VK.Api._callbacks[\" + rnd + \"]\";\n                } else {\n                    var useXDM = true;\n                }\n\n                if (VK._session && VK._session.sid) {\n                    query.access_token = VK._session.sid;\n                }\n\n                qs = VK.Cookie.encode(query);\n\n                responseCb = function (response) {\n                    if (response.error && (response.error.error_code == 3 || response.error.error_code == 4 || response.error.error_code == 5)) {\n                        if (queryTry > 3) return false;\n                        var repeatCall = function (resp) {\n                            VK.Observer.unsubscribe(\"auth.sessionChange\", repeatCall);\n                            delete params.access_token;\n                            if (resp.session) VK.Api.call(method, params, cb, queryTry + 1);\n                        };\n                        VK.Observer.subscribe(\"auth.sessionChange\", repeatCall);\n                        VK.Auth.getLoginStatus();\n                    } else {\n                        cb(response);\n                    }\n                    if (!useXDM) delete VK.Api._callbacks[rnd];\n                };\n\n                if (useXDM) {\n                    if (VK.xdReady) {\n                        VK.XDM.remote.callMethod(\"apiCall\", method, qs, responseCb);\n                    } else {\n                        VK.Observer.subscribe(\"xdm.init\", function () {\n                            VK.XDM.remote.callMethod(\"apiCall\", method, qs, responseCb);\n                        });\n                        VK.XDM.init();\n                    }\n                } else {\n                    VK.Api._callbacks[rnd] = responseCb;\n                    VK.Api.attachScript(VK._domain.api + \"/method/\" + method + \"?\" + qs);\n                }\n            },\n\n            queryLength: function (query) {\n                var len = 100,\n                    i; // sid + sig\n                for (i in query) {\n                    len += i.length + encodeURIComponent(query[i]).length + 1;\n                }\n                return len;\n            },\n        };\n\n        // Alias\n        VK.api = function (method, params, cb) {\n            VK.Api.call(method, params, cb);\n        };\n    }\n\n    if (!VK.Auth) {\n        VK.Auth = {\n            popup: null,\n            lsCb: {},\n\n            setSession: function (session, status, settings, resp) {\n                var login = !VK._session && session,\n                    logout = VK._session && !session,\n                    both = VK._session && session && VK._session.mid != session.mid,\n                    sessionChange = login || logout || (VK._session && session && VK._session.sid != session.sid),\n                    statusChange = status != VK._userStatus,\n                    response = {\n                        session: session,\n                        status: status,\n                        settings: settings,\n                    };\n\n                VK._session = session;\n\n                VK._userStatus = status;\n\n                VK.Cookie.set(session, resp);\n\n                if (sessionChange || statusChange || both) {\n                    setTimeout(function () {\n                        if (statusChange) {\n                            VK.Observer.publish(\"auth.statusChange\", response);\n                        }\n\n                        if (logout || both) {\n                            VK.Observer.publish(\"auth.logout\", response);\n                        }\n\n                        if (login || both) {\n                            VK.Observer.publish(\"auth.login\", response);\n                        }\n\n                        if (sessionChange) {\n                            VK.Observer.publish(\"auth.sessionChange\", response);\n                        }\n                    }, 0);\n                }\n\n                return response;\n            },\n\n            // Public VK.Auth methods\n            login: function (cb, settings) {\n                if (!VK._apiId) {\n                    return false;\n                }\n\n                var url = VK._domain.main + \"/\" + VK._path.login + \"?client_id=\" + VK._apiId + \"&display=popup&redirect_uri=close.html&response_type=token&openapi=1\";\n                if (settings && parseInt(settings, 10) > 0) {\n                    url += \"&scope=\" + settings;\n                }\n\n                VK.Observer.unsubscribe(\"auth.onLogin\");\n                VK.Observer.subscribe(\"auth.onLogin\", cb);\n\n                VK.UI.popup({\n                    width: 665,\n                    height: 370,\n                    url: url,\n                });\n\n                var authCallback = function () {\n                    VK.Auth.getLoginStatus(function (resp) {\n                        VK.Observer.publish(\"auth.onLogin\", resp);\n                        VK.Observer.unsubscribe(\"auth.onLogin\");\n                    }, true);\n                };\n\n                VK.UI.popupOpened = true;\n                var popupCheck = function () {\n                    if (!VK.UI.popupOpened) {\n                        return false;\n                    }\n\n                    try {\n                        if (!VK.UI.active.top || VK.UI.active.closed) {\n                            VK.UI.popupOpened = false;\n                            authCallback();\n                            return true;\n                        }\n                    } catch (e) {\n                        VK.UI.popupOpened = false;\n                        authCallback();\n                        return true;\n                    }\n                    setTimeout(popupCheck, 100);\n                };\n\n                setTimeout(popupCheck, 100);\n            },\n\n            // Logout user from app, vk.com & login.vk.com\n            logout: function (cb) {\n                VK.Auth.revokeGrants(cb);\n            },\n\n            revokeGrants: function (cb) {\n                var onLogout = function (resp) {\n                    VK.Observer.unsubscribe(\"auth.statusChange\", onLogout);\n                    if (cb) {\n                        cb(resp);\n                    }\n                };\n\n                VK.Observer.subscribe(\"auth.statusChange\", onLogout);\n                if (VK._session && VK._session.sid) {\n                    var url =\n                        VK._domain.login +\n                        \"?act=openapi&oauth=1&aid=\" +\n                        parseInt(VK._apiId, 10) +\n                        \"&location=\" +\n                        encodeURIComponent(window.location.hostname) +\n                        \"&do_logout=1&token=\" +\n                        VK._session.sid;\n                    if (VK.Api.supportCORS()) {\n                        var logoutCallback = function () {\n                            VK.Auth.setSession(null, \"unknown\");\n                        };\n\n                        VK.Api.makeRequest(url + \"&new=1\", logoutCallback);\n                    } else {\n                        VK.Api.attachScript(url);\n                    }\n                }\n\n                VK.Cookie.clear();\n            },\n\n            // Get current login status from session (sync) (not use on load time)\n            getSession: function () {\n                return VK._session;\n            },\n\n            // Get current login status from vk.com (async)\n            getLoginStatus: function (cb, force) {\n                if (!VK._apiId) {\n                    return;\n                }\n\n                if (cb) {\n                    if (!force && VK.Auth._loadState == \"loaded\") {\n                        cb({ status: VK._userStatus, session: VK._session });\n                        return;\n                    } else {\n                        VK.Observer.subscribe(\"auth.loginStatus\", cb);\n                    }\n                }\n\n                if (!force && VK.Auth._loadState == \"loading\") {\n                    return;\n                }\n\n                VK.Auth._loadState = \"loading\";\n\n                var url = VK._domain.login + \"?act=openapi&oauth=1&aid=\" + parseInt(VK._apiId, 10) + \"&location=\" + encodeURIComponent(window.location.hostname);\n                if (VK.Api.supportCORS()) {\n                    var loginCallback = function (response) {\n                        if (!this.JSON) {\n                            this.JSON = {};\n                        }\n\n                        if (typeof JSON.parse !== \"function\") {\n                            //IE6 and IE7\n                            response = eval(response);\n                        } else {\n                            response = JSON.parse(response);\n                        }\n\n                        VK.Auth._loadState = \"loaded\";\n                        if (response && response.auth) {\n                            var session = {\n                                mid: response.user.id,\n                                sid: response.access_token,\n                                sig: response.sig,\n                                secret: response.secret,\n                                expire: response.expire,\n                            };\n\n                            if (force) {\n                                session.user = response.user;\n                            }\n\n                            var status = \"connected\";\n                        } else {\n                            var session = null;\n                            var status = response.user ? \"not_authorized\" : \"unknown\";\n                            VK.Cookie.clear();\n                        }\n\n                        VK.Auth.setSession(session, status, false, response);\n                        VK.Observer.publish(\"auth.loginStatus\", { session: session, status: status });\n                        VK.Observer.unsubscribe(\"auth.loginStatus\");\n                    };\n\n                    VK.Api.makeRequest(url + \"&new=1\", loginCallback);\n                } else {\n                    var rnd = parseInt(Math.random() * 10000000, 10);\n                    while (VK.Auth.lsCb[rnd]) {\n                        rnd = parseInt(Math.random() * 10000000, 10);\n                    }\n\n                    VK.Auth.lsCb[rnd] = function (response) {\n                        delete VK.Auth.lsCb[rnd];\n                        VK.Auth._loadState = \"loaded\";\n                        if (response && response.auth) {\n                            var session = {\n                                mid: response.user.id,\n                                sid: response.access_token,\n                                sig: response.sig,\n                                secret: response.secret,\n                                expire: response.expire,\n                            };\n                            if (force) session.user = response.user;\n                            var status = \"connected\";\n                        } else {\n                            var session = null;\n                            var status = response.user ? \"not_authorized\" : \"unknown\";\n                            VK.Cookie.clear();\n                        }\n                        VK.Auth.setSession(session, status, false, response);\n                        VK.Observer.publish(\"auth.loginStatus\", { session: session, status: status });\n                        VK.Observer.unsubscribe(\"auth.loginStatus\");\n                    };\n\n                    // AttachScript here\n                    VK.Api.attachScript(url + \"&rnd=\" + rnd);\n                }\n            },\n        };\n    }\n\n    if (!VK.App) {\n        VK.App = {\n            _appOpened: false,\n            _addToGroupPopup: null,\n\n            open: function (url, params) {\n                if (VK.App._appOpened || !VK._apiId) {\n                    return;\n                }\n\n                if (!VK._session) {\n                    VK.Auth.login(function (resp) {\n                        if (resp && resp.session) {\n                            VK.App._openApp(url, params);\n                        }\n                    });\n                } else {\n                    VK.App._openApp(url, params);\n                }\n            },\n\n            _openApp: function (url, params) {\n                var src,\n                    box,\n                    request = [];\n                params = params || {};\n\n                if (!url || !VK._apiId || VK.App._appOpened) {\n                    return;\n                }\n\n                if (Object.prototype.toString.call(params.data) === \"[object Object]\") {\n                    try {\n                        params.data = JSON.stringify(params.data);\n                    } catch (e) {\n                        params.data = \"\";\n                    }\n                }\n\n                src = VK._domain.base + \"/apps?act=open_external_app_openapi&aid=\" + VK._apiId;\n                params[\"aid\"] = VK._apiId;\n\n                for (var arg in params) {\n                    var val = \"\";\n                    if (!params.hasOwnProperty(arg)) {\n                        continue;\n                    }\n                    if (params[arg] !== undefined) {\n                        val = encodeURIComponent(params[arg]);\n                    }\n                    request.push(encodeURIComponent(arg) + \"=\" + val);\n                }\n\n                src += \"&url=\" + url;\n                src += \"&q=\" + encodeURIComponent(request.join(\"&\"));\n\n                box = VK.Util.Box(\n                    src,\n                    {},\n                    {\n                        closeExternalApp: function () {\n                            if (VK.App._result) {\n                                VK.Observer.publish(\"app.done\", VK.App._result);\n                                VK.App._result = null;\n                            } else {\n                                VK.Observer.publish(\"app.closed\");\n                            }\n                            box.hide();\n                            VK.App._appOpened = false;\n                        },\n                        externalAppDone: function (params, noCloseLayer) {\n                            if (noCloseLayer) {\n                                VK.App._result = params;\n                            } else {\n                                VK.Observer.publish(\"app.done\", params);\n                                box.hide();\n                                VK.App._appOpened = false;\n                                VK.App._result = null;\n                            }\n                        },\n                    }\n                );\n                box.show();\n                VK.App._appOpened = true;\n                VK.App._result = null;\n            },\n\n            addToGroup: function (appId) {\n                if (this._addToGroupPopup && !this._addToGroupPopup.closed) {\n                    return;\n                }\n\n                if (this._onAddToGroupDone) {\n                    VK.Util.removeEvent(\"message\", this._onAddToGroupDone, window);\n                }\n\n                this._onAddToGroupDone = function (event) {\n                    if (event.origin === VK._domain.base && event.data.method === \"app.addToGroup\") {\n                        VK.Observer.publish(\"app.addToGroupDone\", {\n                            app_id: event.data.app_id,\n                            group_ids: event.data.group_ids,\n                        });\n                        VK.Util.removeEvent(\"message\", this._onAddToGroupDone, window);\n                        this._onAddToGroupDone = null;\n                    }\n                }.bind(this);\n\n                if (window.postMessage) {\n                    VK.Util.addEvent(\"message\", this._onAddToGroupDone, window);\n                }\n\n                this._addToGroupPopup = VK.UI.popup({\n                    url: VK._domain.base + \"/add_community_app.php?aid=\" + appId,\n                    width: 560,\n                    height: 650,\n                });\n            },\n        };\n    }\n} else {\n    // if VK.xdConnectionCallbacks\n    setTimeout(function () {\n        var callback;\n        while ((callback = VK.xdConnectionCallbacks.pop())) {\n            callback();\n        }\n    }, 0);\n    if (VK.Widgets && !VK.Widgets._constructor) {\n        VK.Widgets = false;\n    }\n}\n\nif (!VK.UI) {\n    VK.UI = {\n        active: null,\n        _buttons: [],\n        popup: function (options) {\n            var screenX = typeof window.screenX != \"undefined\" ? window.screenX : window.screenLeft,\n                screenY = typeof window.screenY != \"undefined\" ? window.screenY : window.screenTop,\n                outerWidth = typeof window.outerWidth != \"undefined\" ? window.outerWidth : document.body.clientWidth,\n                outerHeight = typeof window.outerHeight != \"undefined\" ? window.outerHeight : document.body.clientHeight - 22,\n                width = options.width,\n                height = options.height,\n                left = parseInt(screenX + (outerWidth - width) / 2, 10),\n                top = parseInt(screenY + (outerHeight - height) / 2.5, 10),\n                features;\n            left = window.screen && window.screenX && screen.left && screen.left > 1000 ? 0 : left; // FF with 2 monitors fix\n            features = \"width=\" + width + \",height=\" + height + \",left=\" + left + \",top=\" + top;\n            this.active = window.open(options.url, \"vk_openapi\", features);\n            return this.active;\n        },\n        button: function (el, handler) {\n            var html = \"\";\n\n            if (typeof el == \"string\") {\n                el = document.getElementById(el);\n            }\n\n            this._buttons.push(el);\n            index = this._buttons.length - 1;\n\n            html =\n                '<table cellspacing=\"0\" cellpadding=\"0\" id=\"openapi_UI_' +\n                index +\n                '\" onmouseover=\"VK.UI._change(1, ' +\n                index +\n                ');\" onmouseout=\"VK.UI._change(0, ' +\n                index +\n                ');\" onmousedown=\"VK.UI._change(2, ' +\n                index +\n                ');\" onmouseup=\"VK.UI._change(1, ' +\n                index +\n                ');\" style=\"cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;\"><tr style=\"vertical-align: middle\">' +\n                '<td><div style=\"border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;\"><div style=\"border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;\">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td>' +\n                '<td><div style=\"background: url(' +\n                VK._domain.base +\n                '/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px\"></div></td>' +\n                '<td><div style=\"border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;\"><div style=\"border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;\">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td>' +\n                \"</tr></table>\";\n            el.innerHTML = html;\n            el.style.width = el.childNodes[0].offsetWidth + \"px\";\n        },\n        _change: function (state, index) {\n            var row = document.getElementById(\"openapi_UI_\" + index).rows[0];\n            var elems = [row.cells[0].firstChild.firstChild, row.cells[2].firstChild.firstChild];\n            for (var i = 0; i < 2; ++i) {\n                var elem = elems[i];\n                if (state === 0) {\n                    elem.style.backgroundColor = \"#6D8DB1\";\n                    elem.style.borderTopColor = \"#7E9CBC\";\n                    elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderBottomColor = \"#5C82AB\";\n                } else if (state == 1) {\n                    elem.style.backgroundColor = \"#7693B6\";\n                    elem.style.borderTopColor = \"#88A4C4\";\n                    elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderBottomColor = \"#6088B4\";\n                } else if (state == 2) {\n                    elem.style.backgroundColor = \"#6688AD\";\n                    elem.style.borderBottomColor = \"#7495B8\";\n                    elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderTopColor = \"#51779F\";\n                }\n            }\n            if (state === 0 || state == 2) {\n                row.cells[2].firstChild.style.backgroundPosition = \"0px -42px\";\n            } else if (state == 1) {\n                row.cells[2].firstChild.style.backgroundPosition = \"0px -63px\";\n            }\n        },\n    };\n}\n\nif (!VK.XDM) {\n    VK.XDM = {\n        remote: null,\n        init: function () {\n            if (this.remote) return false;\n            var url = VK._domain.api + \"/\" + VK._path.proxy;\n            this.remote = new fastXDM.Server({\n                onInit: function () {\n                    VK.xdReady = true;\n                    VK.Observer.publish(\"xdm.init\");\n                },\n            });\n\n            this.remote.append(document.getElementById(VK._rootId), {\n                src: url,\n            });\n        },\n        xdHandler: function (code) {\n            try {\n                eval(\"VK.\" + code);\n            } catch (e) {}\n        },\n    };\n}\n\nif (!VK.Observer) {\n    VK.Observer = {\n        _subscribers: function () {\n            if (!this._subscribersMap) {\n                this._subscribersMap = {};\n            }\n            return this._subscribersMap;\n        },\n        publish: function (eventName) {\n            var args = Array.prototype.slice.call(arguments),\n                eventName = args.shift(),\n                subscribers = this._subscribers()[eventName],\n                i,\n                j;\n\n            if (!subscribers) return;\n\n            for (i = 0, j = subscribers.length; i < j; i++) {\n                if (subscribers[i] != null) {\n                    subscribers[i].apply(this, args);\n                }\n            }\n        },\n        subscribe: function (eventName, handler) {\n            var subscribers = this._subscribers();\n\n            if (typeof handler != \"function\") return false;\n\n            if (!subscribers[eventName]) {\n                subscribers[eventName] = [handler];\n            } else {\n                subscribers[eventName].push(handler);\n            }\n        },\n        unsubscribe: function (eventName, handler) {\n            var subscribers = this._subscribers()[eventName],\n                i,\n                j;\n\n            if (!subscribers) return false;\n            if (typeof handler == \"function\") {\n                for (i = 0, j = subscribers.length; i < j; i++) {\n                    if (subscribers[i] == handler) {\n                        subscribers[i] = null;\n                    }\n                }\n            } else {\n                delete this._subscribers()[eventName];\n            }\n        },\n    };\n}\n\nif (!VK.Widgets) {\n    VK.Widgets = {};\n\n    VK.Widgets.count = 0;\n    VK.Widgets.RPC = {};\n\n    VK.Widgets.loading = function (obj, enabled) {\n        obj.style.background = enabled ? 'url(\"' + VK._domain.base + '/images/upload.gif\") center center no-repeat transparent' : \"none\";\n    };\n\n    VK.Widgets.Comments = function (objId, options, page) {\n        var pData = VK.Util.getPageData();\n        if (!VK._apiId) throw Error(\"VK not initialized. Please use VK.init\");\n        options = VK.Util.parseOptions(options);\n\n        var obj = document.getElementById(objId),\n            params = {\n                limit: options.limit || 10,\n                height: options.height || 0,\n                mini: options.mini === undefined ? \"auto\" : options.mini,\n                norealtime: options.norealtime ? 1 : 0,\n            },\n            mouseup = function () {\n                rpc.callMethod(\"mouseUp\");\n                return false;\n            },\n            move = function (event) {\n                rpc.callMethod(\"mouseMove\", { screenY: event.screenY });\n            },\n            iframe,\n            rpc;\n\n        if (options.browse) {\n            // browse all comments\n            params.browse = 1;\n            params.replies = options.replies || 0;\n        } else {\n            // page\n            var url = options.pageUrl || pData.url;\n            if (url.substr(0, 1) == \"/\") {\n                url = location.protocol + \"//\" + location.host + url;\n            }\n            VK.extend(params, {\n                page: page || 0,\n                status_publish: options.autoPublish === undefined ? 0 : options.autoPublish,\n                attach: options.attach === undefined ? \"*\" : options.attach ? options.attach : \"\",\n                url: url,\n                title: options.pageTitle || pData.title,\n                description: options.pageDescription || pData.description,\n                image: options.pageImage || pData.image,\n            });\n        }\n        if (options.onChange) {\n            // DEPRECATED\n            VK.Observer.subscribe(\"widgets.comments.new_comment\", options.onChange);\n            VK.Observer.subscribe(\"widgets.comments.delete_comment\", options.onChange);\n        }\n\n        return VK.Widgets._constructor(\n            \"widget_comments.php\",\n            objId,\n            options,\n            params,\n            {\n                showBox: function (url, props) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n                startDrag: function () {\n                    cursorBack = window.document.body.style.cursor;\n                    window.document.body.style.cursor = \"pointer\";\n                    VK.Util.addEvent(\"mousemove\", move);\n                    VK.Util.addEvent(\"mouseup\", mouseup);\n                },\n                stopDrag: function () {\n                    window.document.body.style.cursor = cursorBack;\n                    VK.Util.removeEvent(\"mousemove\", move);\n                    VK.Util.removeEvent(\"mouseup\", mouseup);\n                },\n            },\n            {\n                startHeight: 133,\n                minWidth: 300,\n            },\n            function (o, i, r) {\n                iframe = i;\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.CommentsBrowse = function (objId, options) {\n        options = VK.Util.parseOptions(options);\n        options.browse = 1;\n        return VK.Widgets.Comments(objId, options);\n    };\n\n    VK.Widgets.Recommended = function (objId, options) {\n        var pData = VK.Util.getPageData();\n        if (!VK._apiId) throw Error(\"VK not initialized. Please use VK.init\");\n        options = VK.Util.parseOptions(options);\n        var params = {\n            limit: options.limit || 5,\n            max: options.max || 0,\n            sort: options.sort || \"friend_likes\",\n            verb: options.verb || 0,\n            period: options.period || \"week\",\n            target: options.target || \"parent\",\n        };\n        return VK.Widgets._constructor(\n            \"widget_recommended.php\",\n            objId,\n            options,\n            params,\n            {},\n            {\n                startHeight: 116 + params.limit * 47 - 15,\n                minWidth: 150,\n            }\n        );\n    };\n\n    VK.Widgets.Post = function (objId, ownerId, postId, hash, options) {\n        options = VK.Util.parseOptions(options);\n        var obj = document.getElementById(objId),\n            params = {\n                owner_id: ownerId,\n                post_id: postId,\n                hash: hash || \"\",\n                from: options ? options.from : \"\",\n            },\n            iframe,\n            rpc,\n            cursorBack;\n        return VK.Widgets._constructor(\n            \"widget_post.php\",\n            objId,\n            options,\n            params,\n            {\n                showBox: function (url, props) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n                startDrag: function () {\n                    cursorBack = window.document.body.style.cursor;\n                    window.document.body.style.cursor = \"pointer\";\n                },\n                stopDrag: function () {\n                    window.document.body.style.cursor = cursorBack;\n                },\n            },\n            {\n                startHeight: 90,\n                minWidth: 250,\n            },\n            function (o, i, r) {\n                iframe = i;\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Like = (function (Like) {\n        if (Like) return Like;\n\n        var instances = [];\n\n        Like = function (objId, options, page) {\n            var pData = VK.Util.getPageData();\n            if (!VK._apiId) throw Error(\"VK not initialized. Please use VK.init\");\n            options = VK.extend(VK.Util.parseOptions(options), { allowTransparency: true });\n            var verticalBtnHeightWidth = {\n                    18: 43,\n                    20: 47,\n                    22: 51,\n                    24: 55,\n                    30: 67,\n                },\n                type = options.type == \"full\" || options.type == \"button\" || options.type == \"vertical\" || options.type == \"mini\" ? options.type : \"full\",\n                autoWidth = options.width === \"auto\" && (type == \"button\" || type == \"mini\"),\n                btnHeight = parseInt(options.height, 10) || 22,\n                size = btnHeight && verticalBtnHeightWidth[btnHeight] ? btnHeight : 22,\n                width = autoWidth ? 153 : type == \"full\" ? Math.max(200, options.width || 350) : type == \"button\" ? 180 : type == \"mini\" ? 115 : verticalBtnHeightWidth[size],\n                height = type == \"vertical\" ? 2 * btnHeight + 7 : btnHeight,\n                params = {\n                    page: page || 0,\n                    url: options.pageUrl || pData.url,\n                    type: type,\n                    verb: options.verb == 1 ? 1 : 0,\n                    color: options.color || \"\",\n                    title: options.pageTitle || pData.title,\n                    description: options.pageDescription || pData.description,\n                    image: options.pageImage || pData.image,\n                    text: (options.text || \"\").substr(0, 140),\n                    h: btnHeight,\n                },\n                ttHere = options.ttHere || false,\n                isOver = false,\n                hideTimeout = null,\n                obj,\n                buttonIfr,\n                buttonRpc,\n                tooltipIfr,\n                tooltipRpc,\n                checkTO;\n            if (type == \"vertical\" || type == \"button\" || type == \"mini\") delete options.width;\n            if (autoWidth) params.auto_width = 1;\n            function showTooltip(force) {\n                if ((!isOver && !force) || !tooltipRpc) return;\n                if (!tooltipIfr || !tooltipRpc || (tooltipIfr.style.display != \"none\" && tooltipIfr.getAttribute(\"vkhidden\") != \"yes\")) return;\n                hideTimeout && clearTimeout(hideTimeout);\n                checkTO && clearTimeout(checkTO);\n                var scrollTop = options.getScrollTop ? options.getScrollTop() : document.body.scrollTop || document.documentElement.scrollTop || 0;\n                var objPos = VK.Util.getXY(obj, options.fixed);\n                var startY = ttHere ? 0 : objPos[1];\n                if ((scrollTop > objPos[1] - 120 && options.tooltipPos != \"top\") || type == \"vertical\" || options.tooltipPos == \"bottom\") {\n                    tooltipIfr.style.top = startY + height + 2 + \"px\";\n                    tooltipRpc.callMethod(\"show\", false, type + \"_\" + size);\n                } else {\n                    tooltipIfr.style.top = startY - 128 + \"px\";\n                    tooltipRpc.callMethod(\"show\", true, type + \"_\" + size);\n                }\n                VK.Util.ss(tooltipIfr, { left: (ttHere ? 0 : objPos[0]) - (type == \"full\" || type == \"button\" ? 32 : 2) + \"px\", display: \"block\", opacity: 1, filter: \"none\" });\n                tooltipIfr.setAttribute(\"vkhidden\", \"no\");\n                isOver = true;\n            }\n\n            function hideTooltip(force) {\n                if ((isOver && !force) || !tooltipRpc) return;\n                tooltipRpc.callMethod(\"hide\");\n                buttonRpc.callMethod(\"hide\");\n                hideTimeout = setTimeout(function () {\n                    tooltipIfr.style.display = \"none\";\n                }, 400);\n            }\n\n            var widgetId = VK.Widgets._constructor(\n                \"widget_like.php\",\n                objId,\n                options,\n                params,\n                {\n                    initTooltip: function (counter) {\n                        tooltipRpc = new fastXDM.Server(\n                            {\n                                onInit: counter\n                                    ? function () {\n                                          showTooltip();\n                                      }\n                                    : function () {},\n                                proxy: buttonRpc,\n                                showBox: function (url, props) {\n                                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [props.width, props.height], {\n                                        proxy: tooltipRpc,\n                                    });\n                                    box.show();\n                                },\n                            },\n                            false,\n                            { safe: true }\n                        );\n                        tooltipIfr = tooltipRpc.append(ttHere ? obj : document.body, {\n                            src: buttonIfr.src + \"&act=a_like_tooltip\",\n                            scrolling: \"no\",\n                            allowTransparency: true,\n                            id: buttonIfr.id + \"_tt\",\n                            style: {\n                                position: \"absolute\",\n                                padding: 0,\n                                display: \"none\",\n                                opacity: 0.01,\n                                filter: \"alpha(opacity=1)\",\n                                border: \"0\",\n                                width: \"274px\",\n                                height: \"130px\",\n                                zIndex: 5000,\n                                overflow: \"hidden\",\n                            },\n                        });\n                        tooltipIfr.setAttribute(\"vkhidden\", \"yes\");\n\n                        tooltipIfr.onmouseover = function () {\n                            clearTimeout(checkTO);\n                            isOver = true;\n                        };\n                        tooltipIfr.onmouseout = function () {\n                            clearTimeout(checkTO);\n                            isOver = false;\n                            checkTO = setTimeout(function () {\n                                hideTooltip();\n                            }, 200);\n                        };\n                    },\n                    showTooltip: showTooltip,\n                    hideTooltip: hideTooltip,\n                    destroy: function () {\n                        buttonRpc.destroy();\n                        try {\n                            buttonIfr.src = \"about: blank;\";\n                        } catch (e) {}\n                        buttonIfr.parentNode.removeChild(buttonIfr);\n                        if (tooltipIfr) {\n                            try {\n                                tooltipIfr.src = \"about: blank;\";\n                            } catch (e) {}\n                            tooltipIfr.parentNode.removeChild(tooltipIfr);\n                        }\n                        tooltipRpc && tooltipRpc.destroy();\n                    },\n                    showBox: function (url, props) {\n                        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                            proxy: buttonRpc,\n                        });\n                        box.show();\n                    },\n                    proxy: function () {\n                        if (tooltipRpc) {\n                            tooltipRpc.callMethod.apply(tooltipRpc, arguments);\n                        }\n                    },\n                },\n                {\n                    startHeight: height,\n                    minWidth: width,\n                },\n                function (o, i, r) {\n                    buttonRpc = r;\n                    VK.Util.ss((obj = o), { height: height + \"px\", width: width + \"px\", position: \"relative\", clear: \"both\" });\n                    VK.Util.ss((buttonIfr = i), { height: height + \"px\", width: width + \"px\", overflow: \"hidden\", zIndex: 150 });\n                    obj.onmouseover = function () {\n                        clearTimeout(checkTO);\n                        isOver = true;\n                    };\n                    obj.onmouseout = function () {\n                        clearTimeout(checkTO);\n                        isOver = false;\n                        checkTO = setTimeout(function () {\n                            hideTooltip();\n                        }, 200);\n                    };\n                }\n            );\n\n            instances.push(widgetId);\n            return widgetId;\n        };\n\n        Like.destroyAll = function () {\n            var xdm = null;\n            while (instances[0]) {\n                xdm = VK.Widgets.RPC[instances.pop()];\n                xdm && xdm.methods.destroy();\n            }\n        };\n\n        return Like;\n    })(VK.Widgets.Like);\n\n    VK.Widgets.Poll = function (objId, options, pollId) {\n        var pData = VK.Util.getPageData();\n        if (!pollId) throw Error(\"No poll id passed\");\n        options = VK.Util.parseOptions(options);\n        var params = {\n            poll_id: pollId,\n            url: options.pageUrl || pData.url || location.href,\n            title: options.pageTitle || pData.title,\n            description: options.pageDescription || pData.description,\n        };\n        if (options.preview) {\n            params.is_preview = 1;\n            delete options[\"preview\"];\n        }\n        if (options.share !== undefined) {\n            params.share = options.share ? 1 : 0;\n        }\n        var rpc;\n        return VK.Widgets._constructor(\n            \"al_widget_poll.php\",\n            objId,\n            options,\n            params,\n            {\n                showBox: function (url, props) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n            },\n            {\n                startHeight: 144,\n                minWidth: 300,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.App = function (objId, app_id, options) {\n        if (!app_id) throw Error(\"No app id passed\");\n        options = VK.Util.parseOptions(options);\n        var startHeight = void 0,\n            height = void 0,\n            minWidth = void 0,\n            params = {\n                aid: app_id,\n                mode: parseInt(options.mode, 10) || 1,\n            };\n        switch (params.mode) {\n            case 1:\n                options.width = 144;\n                startHeight = 251;\n                break;\n            case 2:\n                options.width = options.width ? Math.max(200, Math.min(10000, parseInt(options.width, 10))) : 200;\n                height = startHeight = 193;\n                break;\n            case 3:\n                options.width = options.width ? Math.max(50, Math.min(10000, parseInt(options.width, 10))) : void 0;\n                height = startHeight = options.height = { 18: 18, 20: 20, 22: 22, 24: 24, 30: 30 }[parseInt(options.height, 10) || 30];\n                break;\n        }\n        minWidth = options.width;\n        return VK.Widgets._constructor(\n            \"widget_app.php\",\n            objId,\n            options,\n            params,\n            {},\n            {\n                startHeight: startHeight,\n                height: height,\n                minWidth: minWidth,\n            }\n        );\n    };\n\n    VK.Widgets.Community = VK.Widgets.Group = function (objId, options, gid) {\n        options = VK.Util.parseOptions(options);\n        gid = parseInt(gid, 10);\n        if (!gid) {\n            throw Error(\"No group_id passed\");\n        }\n        options.mode = parseInt(options.mode, 10).toString();\n        var params = {\n                gid: gid,\n                mode: options.mode ? options.mode : \"0\",\n            },\n            startHeight = options.mode == 3 ? 185 : options.mode == 1 ? 141 : options.height | 0 || 290,\n            rpc;\n        if (options.wall) params.wall = options.wall;\n        params.color1 = options.color1 || \"\";\n        params.color2 = options.color2 || \"\";\n        params.color3 = options.color3 || \"\";\n        params.class_name = options.class_name || \"\";\n        if (options.no_head) params.no_head = 1;\n        if (options.no_cover) params.no_cover = 1;\n        if (options.wide) {\n            params.wide = 1;\n            if (!options.width || options.width < 300) {\n                options.width = 300;\n            }\n        }\n        if (!options.width | 0) options.width = 200;\n\n        var cursorBack;\n\n        function mouseup() {\n            rpc.callMethod(\"mouseUp\");\n            return false;\n        }\n\n        function move(event) {\n            rpc.callMethod(\"mouseMove\", { screenY: event.screenY });\n            return false;\n        }\n\n        return VK.Widgets._constructor(\n            \"widget_community.php\",\n            objId,\n            options,\n            params,\n            {\n                showBox: function (url, props) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n                startDrag: function () {\n                    cursorBack = window.document.body.style.cursor;\n                    window.document.body.style.cursor = \"pointer\";\n                    VK.Util.addEvent(\"mousemove\", move);\n                    VK.Util.addEvent(\"mouseup\", mouseup);\n                },\n                stopDrag: function () {\n                    window.document.body.style.cursor = cursorBack;\n                    VK.Util.removeEvent(\"mousemove\", move);\n                    VK.Util.removeEvent(\"mouseup\", mouseup);\n                },\n                auth: function () {\n                    VK.Auth.login(null, 1);\n                },\n            },\n            {\n                minWidth: 120,\n                startHeight: startHeight,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Auth = function (objId, options) {\n        var pData = VK.Util.getPageData();\n        if (!VK._apiId) throw Error(\"VK not initialized. Please use VK.init\");\n        options = VK.Util.parseOptions(options);\n        if (!options.width) {\n            options.width = 200;\n        }\n        if (options.type) {\n            type = 1;\n        } else {\n            type = 0;\n        }\n        return VK.Widgets._constructor(\n            \"widget_auth.php\",\n            objId,\n            options,\n            {},\n            {\n                makeAuth: function (data) {\n                    if (data.session) {\n                        VK.Auth._loadState = \"loaded\";\n                        VK.Auth.setSession(data.session, \"connected\");\n                        VK.Observer.publish(\"auth.loginStatus\", { session: data.session, status: \"connected\" });\n                        VK.Observer.unsubscribe(\"auth.loginStatus\");\n                    }\n                    if (options.onAuth) {\n                        options.onAuth(data);\n                    } else {\n                        if (options.authUrl) {\n                            var href = options.authUrl;\n                        } else {\n                            var href = window.location.href;\n                        }\n                        if (href.indexOf(\"?\") == -1) {\n                            href += \"?\";\n                        } else {\n                            href += \"&\";\n                        }\n                        var vars = [];\n\n                        for (var i in data) {\n                            if (i != \"session\") vars.push(i + \"=\" + decodeURIComponent(data[i]).replace(/&/g, \"%26\").replace(/\\#/g, \"%23\").replace(/\\?/, \"%3F\"));\n                        }\n                        window.location.href = href + vars.join(\"&\");\n                    }\n                },\n            },\n            {\n                startHeight: 134,\n            }\n        );\n    };\n\n    VK.Widgets.Subscribe = function (objId, options, oid) {\n        oid = parseInt(oid, 10);\n        if (!oid) {\n            throw Error(\"No owner_id passed\");\n        }\n        options = VK.Util.parseOptions(options);\n        var params = {\n                oid: oid,\n            },\n            rpc;\n        if (options.mode) {\n            params.mode = options.mode;\n        }\n        if (options.soft) {\n            params.soft = options.soft;\n        }\n\n        return VK.Widgets._constructor(\n            \"widget_subscribe.php\",\n            objId,\n            options,\n            params,\n            {\n                showBox: function (url, props) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n                auth: function () {\n                    VK.Auth.login(null, 1);\n                },\n            },\n            {\n                minWidth: 220,\n                startHeight: 22,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.ContactUs = function (objId, options, oid) {\n        oid = parseInt(oid, 10);\n        if (!oid) throw Error(\"No group or user id passed\");\n        options = VK.Util.parseOptions(options);\n\n        var params = {\n                oid: oid,\n                height: { 18: 18, 20: 20, 22: 22, 24: 24, 30: 30 }[parseInt(options.height, 10) || 24],\n                text: (options.text || \"\").substr(0, 140),\n            },\n            rpc;\n\n        return VK.Widgets._constructor(\n            \"widget_contactus.php\",\n            objId,\n            options,\n            params,\n            {},\n            {\n                startHeight: params.height,\n                height: params.height,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Bookmarks = function (objId, options) {\n        options = VK.Util.parseOptions(options);\n\n        var params = {\n                height: { 18: 18, 20: 20, 22: 22, 24: 24, 30: 30 }[parseInt(options.height, 10) || 30],\n                url: options.url || window.location.href,\n            },\n            rpc;\n\n        return VK.Widgets._constructor(\n            \"widget_bookmarks.php\",\n            objId,\n            options,\n            params,\n            {},\n            {\n                startHeight: params.height,\n                height: params.height,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Playlist = function (objId, ownerId, playlistId, hash, options) {\n        var params = {\n                oid: parseInt(ownerId, 10),\n                pid: parseInt(playlistId, 10),\n                hash: hash || \"\",\n            },\n            rpc;\n\n        if (!params.oid) throw Error(\"No owner id passed\");\n        if (!params.pid) throw Error(\"No playlist id passed\");\n        options = VK.Util.parseOptions(options);\n\n        return VK.Widgets._constructor(\n            \"widget_playlist.php\",\n            objId,\n            options,\n            params,\n            {\n                showBox: function (url, props) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n            },\n            {\n                minWidth: 200,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Ads = function (objId, options, paramsExtra) {\n        options = VK.Util.parseOptions(options);\n        paramsExtra = paramsExtra || {};\n        var params = {};\n        var defaults = {};\n        var funcs = {};\n        var obj = document.getElementById(objId);\n        var iframe;\n        var rpc;\n\n        var adsParams = {};\n        var adsParamsLocal = {};\n        var adsParamsDefault = {};\n        for (var key in paramsExtra) {\n            var keyFix = inArray(key, [\"hash\"]) ? key : \"ads_\" + key;\n            adsParams[keyFix] = paramsExtra[key];\n        }\n\n        if (obj && obj.getBoundingClientRect) {\n            obj.style.width = \"100%\";\n            obj.style.height = \"100%\";\n            var rect = obj.getBoundingClientRect();\n            obj.style.width = \"\";\n            obj.style.height = \"\";\n            adsParams.ads_ad_unit_width_auto = Math.floor(rect.right - rect.left);\n            adsParams.ads_ad_unit_height_auto = Math.floor(rect.bottom - rect.top);\n        }\n\n        adsParamsDefault.ads_ad_unit_width = 100;\n        adsParamsDefault.ads_ad_unit_height = 100;\n\n        adsParamsLocal.ads_ad_unit_width = parseInt(adsParams.ads_ad_unit_width) || (adsParams.ads_ad_unit_width === \"auto\" && adsParams.ads_ad_unit_width_auto) || adsParamsDefault.ads_ad_unit_width;\n        adsParamsLocal.ads_ad_unit_height =\n            parseInt(adsParams.ads_ad_unit_height) || (adsParams.ads_ad_unit_height === \"auto\" && adsParams.ads_ad_unit_height_auto) || adsParamsDefault.ads_ad_unit_height;\n        if (adsParams.ads_handler) {\n            adsParamsLocal.ads_handler = adsParams.ads_handler;\n        }\n        if (adsParams.ads_handler_empty_html) {\n            adsParamsLocal.ads_handler_empty_html = adsParams.ads_handler_empty_html;\n        }\n\n        delete adsParams.ads_handler;\n        delete adsParams.ads_handler_empty_html;\n\n        params.act = \"ads_web\";\n        params.url = location.href;\n        VK.extend(params, adsParams);\n\n        options.noDefaultParams = true;\n        options.width = adsParamsLocal.ads_ad_unit_width;\n        options.allowTransparency = true;\n        defaults.startHeight = adsParamsLocal.ads_ad_unit_height;\n        defaults.minWidth = adsParamsLocal.ads_ad_unit_width;\n        funcs.adsOnInit = adsOnInit;\n        funcs.newAdsOnInitLoader = newAdsOnInitLoader;\n\n        return VK.Widgets._constructor(\"ads_rotate.php\", objId, options, params, funcs, defaults, onDone);\n\n        function newAdsOnInitLoader(deps) {\n            // replace's ����� �� walkVar\n            var json = JSON.parse(\n                deps\n                    .replace(/&#039;/g, \"'\")\n                    .replace(/&quot;/g, '\"')\n                    .replace(/&gt;/g, \">\")\n                    .replace(/&lt;/g, \"<\")\n                    .replace(/&amp;/g, \"&\")\n            );\n            adsAttachScript(json);\n        }\n        function adsOnInit(errorCode, adsParamsExport) {\n            VK.Widgets.loading(obj, false);\n            adsProcessParams(adsParamsExport);\n            if (options.onAdsReady) options.onAdsReady.apply(options.onAdsReady, Array.prototype.slice.call(arguments));\n            adsProcessHandler(errorCode);\n        }\n        function adsAttachScript(adsScriptData) {\n            if (!(\"vk__adsLight\" in window)) {\n                window.vk__adsLight = false;\n                var attachScriptFunc = (VK.Api && VK.Api.attachScript) || VK.addScript;\n                if (Array.isArray(adsScriptData)) {\n                    adsScriptData.forEach(function (url) {\n                        attachScriptFunc(VK._domain.base + url);\n                    });\n                } else {\n                    var adsScriptVersion = parseInt(adsScriptData);\n                    attachScriptFunc(VK._domain.base + jsc(\"/web/ads_light.js?\") + adsScriptVersion);\n                }\n            } else if (window.vk__adsLight && vk__adsLight.userHandlers && vk__adsLight.userHandlers.onInit) {\n                vk__adsLight.userHandlers.onInit(false); // false - do not publish initial onInit\n            }\n        }\n        function adsProcessParams(adsParamsExport) {\n            if (!adsParamsExport) {\n                return;\n            }\n            for (var paramName in adsParamsExport) {\n                var paramValue = adsParamsExport[paramName];\n                if (paramName === \"ads_ad_unit_width\" || paramName === \"ads_ad_unit_height\") {\n                    if (!(paramName in adsParams)) {\n                        adsParamsLocal[paramName] = parseInt(paramValue) || (paramValue === \"auto\" && adsParams[paramName + \"_auto\"]) || adsParamsDefault[paramName];\n                    }\n                } else {\n                    if (!(paramName in adsParamsLocal)) {\n                        adsParamsLocal[paramName] = paramValue;\n                    }\n                }\n            }\n        }\n        function adsProcessHandler(errorCode) {\n            var handlerResult = adsEvalHandler(adsParamsLocal.ads_handler, errorCode);\n            if (errorCode <= 0 && handlerResult !== true) {\n                try {\n                    console.log(\"VK: ad_unit_id = \" + adsParams.ads_ad_unit_id, \", errorCode = \", errorCode);\n                } catch (e) {}\n                adsInsertHtmlHandler(adsParamsLocal.ads_handler_empty_html, adsParamsLocal.ads_ad_unit_width, adsParamsLocal.ads_ad_unit_height);\n            }\n        }\n        function adsEvalHandler(handler) {\n            var result = false;\n            try {\n                if (!handler) {\n                    return false;\n                }\n                var func = false;\n                if (isFunction(handler)) {\n                    func = handler;\n                } else if (isString(handler)) {\n                    var handlerFuncs = handler.split(\".\");\n                    func = window;\n                    for (var i = 0, len = handlerFuncs.length; i < len; i++) {\n                        func = func[handlerFuncs[i]];\n                        if (!func) {\n                            break;\n                        }\n                    }\n                    if (!func) {\n                        if (handler.substr(0, 8) === \"function\") {\n                            handler = \"return \" + handler + \";\";\n                        }\n                        var handlerResult = new Function(handler)();\n                        if (isFunction(handlerResult)) {\n                            func = handlerResult;\n                        } else {\n                            result = handlerResult;\n                        }\n                    }\n                }\n                if (func) {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    result = func.apply(func, args);\n                }\n            } catch (e) {\n                try {\n                    console.error(e);\n                } catch (e2) {}\n            }\n\n            return result;\n\n            function isFunction(obj) {\n                return Object.prototype.toString.call(obj) === \"[object Function]\";\n            }\n            function isString(obj) {\n                return Object.prototype.toString.call(obj) === \"[object String]\";\n            }\n        }\n        function adsInsertHtmlHandler(handlerHtml, width, height) {\n            if (!handlerHtml) {\n                return;\n            }\n            if (!obj) {\n                return;\n            }\n\n            width = width ? width + \"px\" : \"\";\n            height = height ? height + \"px\" : \"\";\n\n            var iframeHandlerHtml = '<html><head></head><body style=\"padding: 0; margin: 0;\"><div>' + handlerHtml + \"</div></body></html>\";\n\n            var iframeHandler = document.createElement(\"iframe\");\n            iframeHandler.onload = fixIframeHeight;\n            iframeHandler.id = (iframe ? iframe.id : \"vkwidget-\" + Math.round(Math.random() * 1000000)) + \"_ads_html_handler\";\n            iframeHandler.src = \"about:blank\";\n            iframeHandler.width = \"100%\";\n            iframeHandler.height = \"100%\";\n            iframeHandler.scrolling = \"no\";\n            iframeHandler.frameBorder = \"0\";\n            iframeHandler.allowTransparency = true;\n            iframeHandler.style.overflow = \"hidden\";\n            iframeHandler.style.width = width;\n            iframeHandler.style.height = height;\n\n            obj.style.width = width;\n            obj.style.height = height;\n\n            obj.appendChild(iframeHandler);\n\n            iframeHandler.contentWindow.vk_ads_html_handler = iframeHandlerHtml;\n            iframeHandler.src = 'javascript:window[\"vk_ads_html_handler\"]';\n\n            function fixIframeHeight() {\n                if (height) {\n                    return;\n                }\n                try {\n                    var rect = iframeHandler.contentWindow.document.body.firstChild.getBoundingClientRect();\n                    var heightFix = Math.ceil(rect.bottom - rect.top);\n                    if (heightFix) {\n                        iframeHandler.style.height = heightFix;\n                        obj.style.height = heightFix;\n                    }\n                } catch (e) {}\n            }\n        }\n        function indexOf(arr, value, from) {\n            for (var i = from || 0, l = (arr || []).length; i < l; i++) {\n                if (arr[i] == value) return i;\n            }\n            return -1;\n        }\n        function inArray(value, arr) {\n            return indexOf(arr, value) != -1;\n        }\n        function onDone(o, i, r) {\n            obj = o;\n            iframe = i;\n            rpc = r;\n        }\n    };\n\n    VK.Widgets.AllowMessagesFromCommunity = function (objId, options, groupId) {\n        groupId = parseInt(groupId, 10);\n        if (!groupId || groupId < 0) throw Error(\"No group id passed\");\n        options = VK.Util.parseOptions(options);\n\n        var params = {\n                height: { 22: 22, 24: 24, 30: 30 }[parseInt(options.height, 10) || 24],\n                key: options.key ? options.key.substr(0, 256) : \"\",\n                group_id: groupId,\n            },\n            rpc;\n\n        return VK.Widgets._constructor(\n            \"widget_allow_messages_from_community.php\",\n            objId,\n            options,\n            params,\n            {},\n            {\n                startHeight: params.height,\n                height: params.height,\n            },\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Article = function (id, url, options) {\n        var params = {\n            url: url,\n        };\n\n        options = VK.Util.parseOptions(options);\n\n        var rpc;\n        return VK.Widgets._constructor(\n            \"widget_article.php\",\n            id,\n            options,\n            params,\n            {\n                showBox: function (url) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n            },\n            {},\n            function (o, i, r) {\n                rpc = r;\n            }\n        );\n    };\n\n    VK.Widgets.Podcast = function (id, episode, hash, options) {\n        var params = {\n            episode: episode,\n            hash: hash,\n        };\n\n        options = VK.Util.parseOptions(options);\n\n        return VK.Widgets._constructor(\n            \"widget_podcast.php\",\n            id,\n            options,\n            params,\n            {\n                showBox: function (url) {\n                    var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n                        proxy: rpc,\n                    });\n                    box.show();\n                },\n            },\n            {\n                minWidth: 300,\n                startHeight: 150,\n            }\n        );\n    };\n\n    VK.Widgets.CommunityMessages = (function (CommunityMessages) {\n        if (CommunityMessages) return CommunityMessages;\n\n        var instances = {},\n            wCur = {};\n        var BUTTONS_CONF = {\n                no_button: { width: 0, height: 0 },\n                blue_circle: {\n                    width: 50,\n                    height: 50,\n                    margin: {\n                        bottom: 20,\n                    },\n                },\n            },\n            DEFAULT_BUTTON_TYPE = \"blue_circle\",\n            BUTTON_POSITIONS = {\n                left: {\n                    bottom: 0,\n                    left: 20,\n                },\n                right: {\n                    bottom: 0,\n                    right: 20,\n                },\n            },\n            DEFAULT_BUTTON_POSITION = \"right\";\n\n        /* options\n      - welcomeScreen\n      - expandTimeout\n      - shown || expended\n      - widgetPosition\n      - buttonType\n      - disableButtonTooltip\n      - tooltipButtonText\n      - disableNewMessagesSound\n      - disableExpandChatSound\n      - disableTitleChange\n    */\n        CommunityMessages = function (objId, gid, options) {\n            options = VK.Util.parseOptions(options);\n\n            options.width = 300;\n            options.height = 399;\n\n            options.expandTimeout = parseInt(options.expandTimeout) || 0;\n\n            var params = {\n                gid: gid,\n            };\n\n            options.expanded = parseInt(options.expanded) || 0;\n\n            if ((!options.from_dev && lsGet(\"expanded\") != null) || options.expanded) {\n                options.shown = 1;\n            }\n\n            if (options.shown) {\n                params.shown = 1;\n            }\n\n            if (!options.welcomeScreen) {\n                params.disable_welcome_screen = 1;\n            }\n\n            params.ref_source_info = options.ref_source_info;\n            params.ref_source_link = location.href;\n\n            var buttonType = options.buttonType;\n            if (Object.keys(BUTTONS_CONF).indexOf(buttonType) == -1) {\n                buttonType = DEFAULT_BUTTON_TYPE;\n            }\n\n            if (buttonType == \"no_button\") {\n                options.disableButtonTooltip = 1;\n            }\n\n            if (options.disableButtonTooltip) {\n                params.disable_tooltip = 1;\n            }\n            if (options.tooltipButtonText) {\n                params.tooltip_text = options.tooltipButtonText;\n            }\n\n            if (options.disableNewMessagesSound) {\n                params.disable_new_messages_sound = 1;\n            }\n\n            if (instances[objId]) {\n                CommunityMessages.destroy(objId);\n            }\n\n            params.domain = document.domain;\n\n            options.no_loading = 1;\n\n            var curBox = false,\n                expanded = 0;\n            var ttSize = [0, 0],\n                widgetPosition;\n\n            changeWidgetPosition(options.widgetPosition);\n            params.button_position = options.widgetPosition;\n\n            var chatRpc, chatIfr;\n            var inited = 0,\n                timers = {};\n            instances[objId] = VK.Widgets._constructor(\n                \"widget_community_messages.php\",\n                objId,\n                options,\n                params,\n                {\n                    onStartLoading: function () {\n                        var obj = document.getElementById(objId);\n                        obj.style.position = \"fixed\";\n                        obj.style[\"z-index\"] = 10000;\n                        updateWidgetPosition();\n                    },\n                    onReady: function () {\n                        inited = 1;\n                        if (options.expandTimeout > 0 && !options.shown) {\n                            timers.showTimer = setTimeout(function () {\n                                expandChat({\n                                    playSong: !options.disableExpandChatSound,\n                                    noSaveState: 1,\n                                });\n                            }, options.expandTimeout);\n                        }\n                    },\n                    showBox: function (url) {\n                        if (curBox) {\n                            try {\n                                curBox.hide();\n                                try {\n                                    curBox.iframe.src = \"about: blank;\";\n                                } catch (e) {}\n                                curBox.iframe.parentNode.removeChild(curBox.iframe);\n                            } catch (e) {}\n                        }\n                        curBox = VK.Util.Box(\n                            VK.Util.getAbsUrl(url),\n                            [],\n                            {\n                                proxy: chatRpc,\n                            },\n                            {\n                                zIndex: 10002,\n                            }\n                        );\n                        curBox.show();\n                    },\n                    setTooltipSize: function (size) {\n                        ttSize = size;\n                        if (!expanded) {\n                            minimize();\n                        }\n                    },\n                    expand: function (opts) {\n                        opts = opts || {};\n                        expanded = 1;\n                        expand();\n\n                        if (!opts.noSaveState) {\n                            lsSet(\"expanded\", 1);\n                        }\n                    },\n                    minimize: function () {\n                        setTimeout(function () {\n                            expanded = 0;\n                            minimize(objId);\n                            lsRemove(\"expanded\");\n                        }, 120);\n                    },\n                    canNotWrite: function (type) {\n                        options.onCanNotWrite && options.onCanNotWrite(type);\n                    },\n                    destroy: function () {\n                        chatRpc.destroy();\n                        try {\n                            chatIfr.src = \"about: blank;\";\n                        } catch (e) {}\n                        try {\n                            chatIfr.parentNode.removeChild(chatIfr);\n                        } catch (e) {}\n                    },\n                    fatalError: function (error_code, public_id) {\n                        var query = {\n                            code: error_code,\n                            widget: 2,\n                            public_id: public_id,\n                        };\n\n                        if (error_code == 1903) {\n                            query.referrer_domain = document.domain;\n                        }\n\n                        var query_str = [];\n                        for (var i in query) {\n                            query_str.push(i + \"=\" + query[i]);\n                        }\n\n                        CommunityMessages.destroy(objId);\n                        var box = VK.Util.Box(VK.Util.getAbsUrl(\"blank.php?\" + query_str.join(\"&\")));\n                        box.show();\n                    },\n                    setPageTitle: function (title) {\n                        if (options.disableTitleChange) {\n                            return;\n                        }\n                        stopTitleAnimation();\n                        wCur.oldTitle = document.title || null;\n                        wCur.title = title;\n                        wCur.changeTitleMode = 0;\n                        startTitleNotify(1);\n                    },\n                    resetPageTitle: function () {\n                        stopTitleAnimation();\n                    },\n                    newMessage: function () {\n                        if (document.hasFocus && !document.hasFocus() && !options.disableNewMessagesSound) {\n                            callRpcMethod(\"playNewMsgSong\");\n                        }\n                    },\n                },\n                {},\n                function (o, i, r) {\n                    chatRpc = r;\n                    chatIfr = i;\n                    if (!options.shown) {\n                        minimize();\n                    } else {\n                        expand();\n                    }\n                }\n            );\n\n            function startTitleNotify(fast) {\n                clearTimeout(wCur.titleTimer);\n                wCur.titleTimer = setTimeout(\n                    function () {\n                        if (wCur.changeTitleMode == 1) {\n                            document.title = wCur.oldTitle || \"\";\n                        } else {\n                            document.title = wCur.title;\n                        }\n                        wCur.changeTitleMode = wCur.changeTitleMode == 1 ? 0 : 1;\n                        startTitleNotify();\n                    },\n                    fast ? 0 : 1500\n                );\n            }\n\n            function stopTitleAnimation() {\n                if (options.disableTitleChange) {\n                    return;\n                }\n                clearTimeout(wCur.titleTimer);\n                if (wCur.oldTitle) {\n                    document.title = wCur.oldTitle;\n                } else if (wCur.oldTitle === null) {\n                    document.title = \"\";\n                }\n                wCur.title = \"\";\n            }\n\n            function expand() {\n                var obj = document.getElementById(objId),\n                    frame = obj.getElementsByTagName(\"iframe\")[0];\n\n                obj.style.width = frame.width = \"372px\";\n                obj.style.height = frame.height = \"399px\";\n                obj.style.margin = \"0px 0px 0px 0px\";\n                //frame.style.boxShadow = '0 0 0 1px rgba(0, 20, 51, .12), 0 20px 40px 0 rgba(0, 0, 0, 0.3)';\n                //frame.style.borderRadius = '6px';\n            }\n\n            function minimize() {\n                var obj = document.getElementById(objId),\n                    frame = obj.getElementsByTagName(\"iframe\")[0];\n\n                var btnConf = BUTTONS_CONF[buttonType];\n\n                var w = btnConf.width + ttSize[0];\n                var h = Math.max(btnConf.height, ttSize[1]);\n\n                obj.style.width = w + \"px\";\n                obj.style.height = h + \"px\";\n                frame.style.boxShadow = \"none\";\n\n                var margin = btnConf.margin ? btnConf.margin : {};\n                obj.style.margin = \"0px \" + (margin.right || 0) + \"px \" + (margin.bottom || 0) + \"px 0px\";\n\n                if (frame) {\n                    frame.width = w;\n                    frame.height = h;\n                }\n            }\n\n            function changeWidgetPosition(position) {\n                widgetPosition = position;\n                if (Object.keys(BUTTON_POSITIONS).indexOf(widgetPosition) == -1) {\n                    widgetPosition = DEFAULT_BUTTON_POSITION;\n                }\n                updateWidgetPosition();\n                callRpcMethod(\"changeButtonPosition\", widgetPosition);\n            }\n\n            function updateWidgetPosition() {\n                var obj = document.getElementById(objId);\n\n                if (!obj) {\n                    return;\n                }\n\n                var props = [\"left\", \"right\", \"top\", \"bottom\"];\n                for (var i in props) {\n                    obj.style[props[i]] = \"\";\n                }\n\n                var conf = BUTTON_POSITIONS[widgetPosition];\n                for (var i in conf) {\n                    obj.style[i] = conf[i] + \"px\";\n                }\n\n                if (!inited) {\n                    return;\n                }\n\n                if (expanded) {\n                    expand();\n                } else {\n                    minimize();\n                }\n            }\n\n            function callRpcMethod() {\n                chatRpc && chatRpc.callMethod.apply(chatRpc, arguments);\n            }\n\n            /* opts\n        - welcomeScreen\n      */\n            function expandChat(opts) {\n                if (!opts || Object.prototype.toString.call(opts) !== \"[object Object]\") {\n                    opts = {};\n                }\n\n                if (opts.welcomeScreen == undefined) {\n                    opts.welcomeScreen = options.welcomeScreen;\n                }\n\n                clearTimeout(timers.showTimer);\n                callRpcMethod(\"expand\", opts);\n            }\n\n            function minimizeChat() {\n                callRpcMethod(\"minimize\");\n            }\n\n            function setSourceData(data) {\n                callRpcMethod(\n                    \"setSourceData\",\n                    VK.extend(\n                        {\n                            link: location.href,\n                        },\n                        data\n                    )\n                );\n            }\n\n            VK.Util.addEvent(\"popstate\", setSourceData.bind(this, {}), window);\n            VK.Util.addEvent(\"hashchange\", setSourceData.bind(this, {}), window);\n\n            function destroyChat() {\n                stopTitleAnimation();\n                CommunityMessages.destroy(objId);\n            }\n\n            return {\n                expand: expandChat,\n                minimize: minimizeChat,\n                destroy: destroyChat,\n                setSourceData: setSourceData,\n                changeButtonPosition: changeWidgetPosition,\n                stopTitleAnimation: stopTitleAnimation,\n            };\n        };\n\n        function lsGet(key) {\n            if (!window.localStorage) {\n                return null;\n            }\n            return localStorage.getItem(\"vk_community_widget_\" + key);\n        }\n\n        function lsSet(key, value) {\n            window.localStorage && localStorage.setItem(\"vk_community_widget_\" + key, value);\n        }\n\n        function lsRemove(key) {\n            window.localStorage && localStorage.removeItem(\"vk_community_widget_\" + key);\n        }\n\n        CommunityMessages.destroy = function (objId) {\n            if (!instances[objId]) {\n                return;\n            }\n\n            var xdm = VK.Widgets.RPC[instances[objId]];\n            xdm && xdm.methods.destroy();\n\n            delete instances[objId];\n        };\n\n        CommunityMessages.expand = function (objId) {\n            console.log(instances[objId]);\n        };\n\n        return CommunityMessages;\n    })(VK.Widgets.CommunityMessages);\n\n    VK.Widgets._constructor = function (widgetUrl, objId, options, params, funcs, defaults, onDone, widgetId, iter) {\n        var obj = document.getElementById(objId);\n        widgetId = widgetId || ++VK.Widgets.count;\n\n        if (!obj) {\n            iter = iter || 0;\n            if (iter > 10) {\n                throw Error(\"VK.Widgets: object #\" + objId + \" not found.\");\n            }\n            setTimeout(function () {\n                VK.Widgets._constructor(widgetUrl, objId, options, params, funcs, defaults, onDone, widgetId, iter + 1);\n            }, 500);\n            return widgetId;\n        }\n\n        options = options || {};\n        defaults = defaults || {};\n        funcs = funcs || {};\n\n        if (options.preview) {\n            params.preview = 1;\n            delete options[\"preview\"];\n        }\n\n        var ifr,\n            url,\n            urlQueryString,\n            encodedParam,\n            rpc,\n            iframe,\n            i,\n            width = options.width === \"auto\" ? (obj.clientWidth || obj.offsetWidth || defaults.minWidth) | 0 : parseInt(options.width || 0, 10);\n        if (params.act === \"silent_code\") {\n            width = \"1px\";\n            obj.style.opacity = 0;\n            obj.style.display = \"none\";\n            obj.style.position = \"absolute\";\n        } else {\n            width = width ? Math.max(defaults.minWidth || 200, Math.min(defaults.maxWidth || 10000, width)) + \"px\" : \"100%\";\n        }\n        obj.style.width = width;\n\n        if (options.height) {\n            params.height = options.height;\n            obj.style.height = options.height + \"px\";\n        } else {\n            obj.style.height = (defaults.startHeight || 200) + \"px\";\n        }\n\n        if (width === \"100%\") params.startWidth = (obj.clientWidth || obj.offsetWidth) | 0;\n        if (!params.url) params.url = options.pageUrl || location.href.replace(/#.*$/, \"\");\n\n        url = VK._domain.base + \"/\" + widgetUrl;\n        urlQueryString = \"\";\n        if (!options.noDefaultParams) {\n            urlQueryString += \"&app=\" + (VK._apiId || \"0\") + \"&width=\" + encodeURIComponent(width);\n        }\n        urlQueryString += \"&_ver=\" + VK.version;\n        if (VK._iframeAppWidget) {\n            params.iframe_app = 1;\n        }\n        var pData = VK.Util.getPageData();\n        params.url = params.url || pData.url || \"\";\n        params.referrer = params.referrer || document.referrer || \"\";\n        params.title = params.title || pData.title || document.title || \"\";\n        for (i in params) {\n            if (i == \"title\" && params[i].length > 80) params[i] = params[i].substr(0, 80) + \"...\";\n            if (i == \"description\" && params[i].length > 160) params[i] = params[i].substr(0, 160) + \"...\";\n            if (typeof params[i] == \"number\") {\n                encodedParam = params[i];\n            } else {\n                try {\n                    encodedParam = encodeURIComponent(params[i]);\n                } catch (e) {\n                    encodedParam = \"\";\n                }\n            }\n            urlQueryString += \"&\" + i + \"=\" + encodedParam;\n        }\n        urlQueryString += \"&\" + (+new Date()).toString(16);\n        url += \"?\" + urlQueryString.substr(1);\n\n        funcs.onStartLoading && funcs.onStartLoading();\n        if (!options.no_loading) {\n            VK.Widgets.loading(obj, true);\n        }\n\n        funcs.showLoader = function (enable) {\n            VK.Util.Loader(enable);\n        };\n        funcs.publish = function () {\n            var args = Array.prototype.slice.call(arguments);\n            args.push(widgetId);\n            VK.Observer.publish.apply(VK.Observer, args);\n        };\n        funcs.onInit = function () {\n            VK.Widgets.loading(obj, false);\n            if (funcs.onReady) funcs.onReady();\n            if (options.onReady) options.onReady();\n        };\n        funcs.resize = function (e, cb) {\n            obj.style.height = e + \"px\";\n            var el = document.getElementById(\"vkwidget\" + widgetId);\n            if (el) {\n                el.style.height = e + \"px\";\n            }\n        };\n        funcs.resizeWidget = function (newWidth, newHeight) {\n            newWidth = parseInt(newWidth);\n            newHeight = parseInt(newHeight);\n            var widgetElem = document.getElementById(\"vkwidget\" + widgetId);\n            if (isFinite(newWidth)) {\n                obj.style.width = newWidth + \"px\";\n                if (widgetElem) {\n                    widgetElem.style.width = newWidth + \"px\";\n                }\n            }\n            if (isFinite(newHeight)) {\n                obj.style.height = newHeight + \"px\";\n                if (widgetElem) {\n                    widgetElem.style.height = newHeight + \"px\";\n                }\n            }\n            if (options.onResizeWidget) options.onResizeWidget();\n        };\n        funcs.updateVersion = function (ver) {\n            if (ver > 1) {\n                VK.Api.attachScript(\"//vk.com/js/api/openapi_update.js?\" + parseInt(ver));\n            }\n        };\n        rpc = VK.Widgets.RPC[widgetId] = new fastXDM.Server(\n            funcs,\n            function (origin) {\n                if (!origin) return true;\n                origin = origin.toLowerCase();\n                return origin.match(/(\\.|\\/)vk\\.com($|\\/|\\?)/);\n            },\n            { safe: true }\n        );\n        var style = {\n            overflow: \"hidden\",\n        };\n        if (options.custom_style && typeof options.custom_style === \"object\") {\n            style = VK.extend(style, options.custom_style);\n        }\n        iframe = VK.Widgets.RPC[widgetId].append(obj, {\n            src: url,\n            width: width.indexOf(\"%\") != -1 ? width : parseInt(width) || width,\n            height: defaults.startHeight || \"100%\",\n            scrolling: \"no\",\n            id: \"vkwidget\" + widgetId,\n            allowTransparency: options.allowTransparency || false,\n            style: style,\n        });\n        onDone &&\n            setTimeout(function () {\n                onDone(obj, iframe || obj.firstChild, rpc);\n            }, 10);\n        return widgetId;\n    };\n}\n\nif (!VK.Util) {\n    VK.Util = {\n        getPageData: function () {\n            if (!VK._pData) {\n                var metas = document.getElementsByTagName(\"meta\"),\n                    pData = {},\n                    keys = [\"description\", \"title\", \"url\", \"image\", \"app_id\"],\n                    metaName;\n                for (var i in metas) {\n                    if (!metas[i].getAttribute) continue;\n                    if (metas[i].getAttribute && ((metaName = metas[i].getAttribute(\"name\")) || (metaName = metas[i].getAttribute(\"property\")))) {\n                        for (var j in keys) {\n                            if (metaName == keys[j] || metaName == \"og:\" + keys[j] || metaName == \"vk:\" + keys[j]) {\n                                pData[keys[j]] = metas[i].content;\n                            }\n                        }\n                    }\n                }\n                if (pData.app_id && !VK._apiId) {\n                    VK._apiId = pData.app_id;\n                }\n                pData.title = pData.title || document.title || \"\";\n                pData.description = pData.description || \"\";\n                pData.image = pData.image || \"\";\n                if (!pData.url && VK._iframeAppWidget && VK._apiId) {\n                    pData.url = \"/app\" + VK._apiId;\n                    if (VK._browserHash) {\n                        pData.url += VK._browserHash;\n                    }\n                }\n                var loc = location.href.replace(/#.*$/, \"\");\n                if (!pData.url || !pData.url.indexOf(loc)) {\n                    pData.url = loc;\n                }\n                VK._pData = pData;\n            }\n            return VK._pData;\n        },\n\n        getStyle: function (elem, name) {\n            var ret,\n                defaultView = document.defaultView || window;\n            if (defaultView.getComputedStyle) {\n                name = name.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n                var computedStyle = defaultView.getComputedStyle(elem, null);\n                if (computedStyle) {\n                    ret = computedStyle.getPropertyValue(name);\n                }\n            } else if (elem.currentStyle) {\n                var camelCase = name.replace(/\\-(\\w)/g, function (all, letter) {\n                    return letter.toUpperCase();\n                });\n                ret = elem.currentStyle[name] || elem.currentStyle[camelCase];\n            }\n\n            return ret;\n        },\n\n        getAbsUrl: function (url) {\n            return VK._domain.base + \"/\" + url.replace(/^\\s*\\/?/, \"\");\n        },\n\n        parseOptions: function (options) {\n            if (Object.prototype.toString.call(options) !== \"[object Object]\") {\n                options = {};\n            }\n\n            if (options.base_domain) {\n                VK._domain.base = options.base_domain;\n            }\n            if (options.login_domain) {\n                VK._domain.login = options.login_domain;\n            }\n\n            return options;\n        },\n\n        getXY: function (obj, fixed) {\n            if (!obj || obj === undefined) return;\n\n            var left = 0,\n                top = 0;\n            if (obj.getBoundingClientRect !== undefined) {\n                var rect = obj.getBoundingClientRect();\n                left = rect.left;\n                top = rect.top;\n                fixed = true;\n            } else if (obj.offsetParent) {\n                do {\n                    left += obj.offsetLeft;\n                    top += obj.offsetTop;\n                    if (fixed) {\n                        left -= obj.scrollLeft;\n                        top -= obj.scrollTop;\n                    }\n                } while ((obj = obj.offsetParent));\n            }\n            if (fixed) {\n                top += window.pageYOffset || (window.scrollNode && scrollNode.scrollTop) || document.documentElement.scrollTop;\n                left += window.pageXOffset || (window.scrollNode && scrollNode.scrollLeft) || document.documentElement.scrollLeft;\n            }\n\n            return [left, top];\n        },\n\n        Loader: function self(enable) {\n            if (!self.loader) {\n                self.loader = document.createElement(\"DIV\");\n                self.loader.innerHTML =\n                    '<style type=\"text/css\">\\\n        @-webkit-keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}\\\n        @keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}\\\n        .VKWidgetsLoader div {width: 7px;height: 7px;-webkit-border-radius: 50%;-khtml-border-radius: 50%;-moz-border-radius: 50%;border-radius: 50%;background: #fff;top: 21px;position: absolute;z-index: 2;-o-transition: opacity 350ms linear; transition: opacity 350ms linear;opacity: 0.2;-webkit-animation-duration: 750ms;-o-animation-duration: 750ms;animation-duration: 750ms;-webkit-animation-name: VKWidgetsLoaderKeyframes;-o-animation-name: VKWidgetsLoaderKeyframes;animation-name: VKWidgetsLoaderKeyframes;-webkit-animation-iteration-count: infinite;-o-animation-iteration-count: infinite;animation-iteration-count: infinite;-webkit-transform: translateZ(0);transform: translateZ(0);}</style><div class=\"VKWidgetsLoader\" style=\"position: fixed;left: 50%;top: 50%;margin: -25px -50px;z-index: 1002;height: 50px;width: 100px;\"><div style=\"left: 36px;-webkit-animation-delay: 0ms;-o-animation-delay: 0ms;animation-delay: 0ms;\"></div><div style=\"left: 47px;-webkit-animation-delay: 180ms;-o-animation-delay: 180ms;animation-delay: 180ms;\"></div><div style=\"left: 58px;-webkit-animation-delay: 360ms;-o-animation-delay: 360ms;animation-delay: 360ms;\"></div><span style=\"display: block;background-color: #000;-webkit-border-radius: 4px;-khtml-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;-webkit-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);-moz-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);position: absolute;left: 0;top: 0;bottom: 0; right: 0;z-index: 1;opacity: 0.7;\"></span></div>';\n                document.body.insertBefore(self.loader, document.body.firstChild);\n            }\n            self.loader.style.display = enable ? \"block\" : \"none\";\n        },\n\n        Box: function (src, sizes, fnc, options) {\n            fnc = fnc || {};\n            var overflowB = document.body.style.overflow;\n            VK.Util.Loader(true);\n            var is_vk = /(^|\\.)(vk\\.com|vkontakte\\.ru)$/.test(location.hostname);\n            var rpc = new fastXDM.Server(\n                    VK.extend(\n                        fnc,\n                        {\n                            onInit: function () {\n                                iframe.style.background = \"transparent\";\n                                iframe.style.visibility = \"visible\";\n                                document.body.style.overflow = \"hidden\";\n                                iframe.setAttribute(\"allowfullscreen\", 1);\n                                if (is_vk) document.body.className += \" layers_shown\";\n                                VK.Util.Loader();\n                            },\n                            hide: function () {\n                                iframe.style.display = \"none\";\n                            },\n                            tempHide: function () {\n                                iframe.style.left = \"-10000px\";\n                                iframe.style.top = \"-10000px\";\n                                iframe.style.width = \"10px\";\n                                iframe.style.height = \"10px\";\n                                if (is_vk) document.body.className = document.body.className.replace(/\\b\\s*?layers_shown\\s*\\b/, \" \");\n                                document.body.style.overflow = overflowB;\n                            },\n                            destroy: function () {\n                                try {\n                                    iframe.src = \"about: blank;\";\n                                } catch (e) {}\n                                iframe.parentNode.removeChild(iframe);\n                                if (is_vk) document.body.className = document.body.className.replace(/\\b\\s*?layers_shown\\s*\\b/, \" \");\n                                document.body.style.overflow = overflowB;\n                            },\n                            resize: function (w, h) {},\n                        },\n                        true\n                    ),\n                    false,\n                    { safe: true }\n                ),\n                iframe = rpc.append(document.body, {\n                    src: src.replace(/&amp;/g, \"&\"),\n                    scrolling: \"no\",\n                    allowTransparency: true,\n                    style: {\n                        position: \"fixed\",\n                        left: 0,\n                        top: 0,\n                        zIndex: (options && options.zIndex) || 1002,\n                        background: VK._domain.base + \"/images/upload.gif center center no-repeat transparent\",\n                        padding: \"0\",\n                        border: \"0\",\n                        width: \"100%\",\n                        height: \"100%\",\n                        overflow: \"hidden\",\n                        visibility: \"hidden\",\n                    },\n                });\n            return {\n                show: function (scrollTop, height) {\n                    iframe.style.display = \"block\";\n                    document.body.style.overflow = \"hidden\";\n                },\n                hide: function () {\n                    iframe.style.display = \"none\";\n                    document.body.style.overflow = overflowB;\n                },\n                iframe: iframe,\n                rpc: rpc,\n            };\n        },\n\n        addEvent: function (type, func, target) {\n            target = target || window.document;\n            if (target.addEventListener) {\n                target.addEventListener(type, func, false);\n            } else if (target.attachEvent) {\n                target.attachEvent(\"on\" + type, func);\n            }\n        },\n\n        removeEvent: function (type, func, target) {\n            target = target || window.document;\n            if (target.removeEventListener) {\n                target.removeEventListener(type, func, false);\n            } else if (target.detachEvent) {\n                target.detachEvent(\"on\" + type, func);\n            }\n        },\n\n        ss: function (el, styles) {\n            VK.extend(el.style, styles, true);\n        },\n    };\n}\n\nif (!VK.Retargeting) {\n    VK.Retargeting = {\n        pixelCode: null,\n        Init: function (pixelCode) {\n            this.pixelCode = pixelCode;\n            return this;\n        },\n        Event: function (event) {\n            if (!this.pixelCode) {\n                return;\n            }\n            var pData = VK.Util.getPageData();\n            var metatagUrl = pData.url.substr(0, 500);\n            var metatagTitle = (pData.title && pData.title.substr(0, 500)) || \"\";\n\n            (window.Image ? new Image() : document.createElement(\"img\")).src =\n                \"https://vk.com/rtrg?p=\" +\n                this.pixelCode +\n                (event ? \"&event=\" + encodeURIComponent(event) : \"\") +\n                (metatagUrl ? \"&metatag_url=\" + encodeURIComponent(metatagUrl) : \"\") +\n                (metatagTitle ? \"&metatag_title=\" + encodeURIComponent(metatagTitle) : \"\");\n        },\n        Hit: function () {\n            this.Event();\n        },\n        Add: function (audienceID) {\n            if (!this.pixelCode || !audienceID) {\n                return;\n            }\n\n            (window.Image ? new Image() : document.createElement(\"img\")).src = \"https://vk.com/rtrg?p=\" + this.pixelCode + \"&audience=\" + encodeURIComponent(audienceID);\n        },\n        ProductEvent: function (priceListID, event, params, opts) {\n            if (!this.pixelCode || !event || !priceListID) {\n                return;\n            }\n\n            opts = opts || {};\n\n            var canShowErrors = true;\n            if (typeof opts.show_errors !== \"undefined\") {\n                canShowErrors = opts.show_errors ? true : false;\n            }\n            var errorsIgnore = \"0\";\n            if (typeof opts.errors_ignore !== \"undefined\") {\n                errorsIgnore = opts.errors_ignore ? \"1\" : \"0\";\n            }\n\n            var pData = VK.Util.getPageData();\n            var metatagUrl = pData.url.substr(0, 500);\n            var metatagTitle = (pData.title && pData.title.substr(0, 500)) || \"\";\n            var url = \"https://vk.com/rtrg\";\n            var productParams = params ? JSON.stringify(params) : \"\";\n            var requestParams = {\n                p: this.pixelCode,\n                products_event: event,\n                price_list_id: priceListID,\n                e: \"1\",\n                i: errorsIgnore,\n                metatag_url: metatagUrl,\n                metatag_title: metatagTitle,\n            };\n            if (productParams) {\n                requestParams.products_params = productParams;\n            }\n\n            var query = Object.keys(requestParams)\n                .map(function (key) {\n                    var segment = encodeURIComponent(key) + \"=\" + encodeURIComponent(requestParams[key]);\n                    return segment;\n                })\n                .join(\"&\");\n\n            var requestUrl = url + \"?\" + query;\n\n            VK.Api.makeRequest(requestUrl, this.onDone.bind(this, canShowErrors));\n        },\n        onDone: function (canShowErrors, response) {\n            if (!response || !canShowErrors) {\n                return;\n            }\n\n            var resp;\n            try {\n                resp = JSON.parse(response);\n            } catch (e) {\n                return;\n            }\n\n            if (!resp || !resp.errors) {\n                return;\n            }\n            this.showErrors(resp.errors);\n        },\n        showErrors: function (errors) {\n            if (!errors && !errors.length) {\n                return;\n            }\n\n            var errorBegin = \"VK Pixel Error (\" + this.pixelCode + \"): \";\n\n            if (typeof errors === \"string\") {\n                console.error(errorBegin + errors);\n                return;\n            }\n\n            var errorsLength = errors.length;\n\n            if (!errorsLength) {\n                return;\n            }\n\n            for (var i = 0; i < errorsLength; i++) {\n                console.error(errorBegin + errors[i]);\n            }\n        },\n    };\n}\n\nif (!VK.Pixel) {\n    VK.Pixel = function (pixelCode) {\n        if (this.constructor != VK.Pixel) {\n            throw Error(\"VK.Pixel was called without 'new' operator\");\n        }\n\n        VK.extend(this, VK.Retargeting);\n        this.pixelCode = pixelCode;\n        this.Goal = function (conversionName, parameters) {\n            return VK.Goal(conversionName, parameters, pixelCode);\n        };\n\n        return this;\n    };\n}\n\nif (!VK.Goal) {\n    /**\n     * @param {String} [conversionName=conversion]\n     * @param {Object} [parameters]\n     * @param {Integer} [parameters.value=0] - conversion amount\n     * @param {String} [pixelCode] - pixel code\n     * @public\n     */\n    VK.Goal = function (conversionName, parameters, pixelCode) {\n        var pixel = pixelCode || VK.Retargeting.pixelCode;\n        if (!pixel || typeof pixel !== \"string\") {\n            console.error(\"Error argument: pixelCode not a string. Use VK.Retargeting.Init or VK.Pixel to initialize pixel\");\n            return;\n        }\n\n        var eventName = conversionName || \"conversion\";\n        if (typeof eventName !== \"string\") {\n            console.error(\"Error argument: conversionName not a string\");\n            return;\n        }\n\n        var value = (parameters || {}).value || 0;\n        if (typeof value === \"string\") {\n            if (parseFloat(value).toString() !== value) {\n                console.error(\"Error argument: parameters.value not a number or valid number string\");\n                return;\n            }\n        } else if (typeof value !== \"number\") {\n            console.error(\"Error argument: parameters.value not a number or valid number string\");\n            return;\n        }\n\n        var url = \"https://vk.com/rtrg\";\n        var requestParams = {\n            p: pixel,\n            e: \"1\",\n            c: eventName,\n            v: value,\n        };\n\n        var query = Object.keys(requestParams)\n            .map(function (key) {\n                return encodeURIComponent(key) + \"=\" + encodeURIComponent(requestParams[key]);\n            })\n            .join(\"&\");\n\n        var requestUrl = url + \"?\" + query;\n        VK.Api.makeRequest(requestUrl, VK.Retargeting.onDone.bind(VK.Retargeting, true));\n    };\n}\n\n// Init asynchronous library loading\nwindow.vkAsyncInit && setTimeout(vkAsyncInit, 0);\n\nif (window.vkAsyncInitCallbacks && vkAsyncInitCallbacks.length) {\n    setTimeout(function () {\n        var callback;\n        while ((callback = vkAsyncInitCallbacks.pop())) {\n            try {\n                callback();\n            } catch (e) {\n                try {\n                    console.error(e);\n                } catch (e2) {}\n            }\n        }\n    }, 0);\n}\n\ntry {\n    stManager.done(\"api/openapi.js\");\n} catch (e) {}\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React from \"react\";\r\nimport \"./auth.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Auth = ({ user }) => {\r\n    const signIn = () => {\r\n        user.login();\r\n    };\r\n    const signOut = () => {\r\n        user.logout();\r\n    };\r\n\r\n    return (\r\n        <div className=\"toggle\">\r\n            <label className=\"label_text__toogle\">Authorization: </label>\r\n            <input className=\"input__toggle\" type=\"checkbox\" id=\"buttonThree\" checked={user.isAuthorized} onChange={user.isAuthorized ? signOut : signIn} />\r\n            <label className=\"label__toggle\" htmlFor=\"buttonThree\">\r\n                <i></i>\r\n            </label>\r\n        </div>\r\n    );\r\n};\r\n\r\nAuth.propTypes = {\r\n    user: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Auth;\r\n","import React from \"react\";\r\nimport logo from \"../../media/logo.svg\";\r\nimport \"./header.css\";\r\nimport Auth from \"./header/Auth\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Header = ({ user }) => {\r\n    const welcome_word = `Welcome, `;\r\n\r\n    const RenderTemplate = () => {\r\n        if (user.error) {\r\n            return <p>Во время запроса произошла ошибка, обновите страницу</p>;\r\n        }\r\n\r\n        if (user.isFetching) {\r\n            return <p>Загружаю...</p>;\r\n        }\r\n\r\n        return (\r\n            <div className=\"welcome\">\r\n                <p className=\"welcome__word\">{welcome_word} </p>\r\n                <p className={`welcome__word_user ${user.isAuthorized ? \"welcome__word_anon\" : \"\"}`}>{user.name}</p>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <header className=\"App-header\">\r\n                <div className=\"app__logo\">\r\n                    <img src={logo} alt=\"logo img\" className=\"app__logo_img\" />\r\n                </div>\r\n                <RenderTemplate />\r\n                <Auth user={user} />\r\n            </header>\r\n        </>\r\n    );\r\n};\r\n\r\nHeader.propTypes = {\r\n    user: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { hasError: false };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        // Обновить состояние с тем, чтобы следующий рендер показал запасной UI.\r\n        return { hasError: true };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n        // Можно также сохранить информацию об ошибке в соответствующую службу журнала ошибок\r\n        console.log(errorInfo);\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            // Можно отрендерить запасной UI произвольного вида\r\n            return <h1>Что-то пошло не так.</h1>;\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport \"./photoItem.css\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst PhotoItem = ({ photo }) => {\r\n    return (\r\n        <li className=\"el\">\r\n            <div className=\"el_container\">\r\n                <div className=\"img_container\">\r\n                    <img className=\"el__photo\" src={photo.sizes[photo.sizes.length - 1].url} alt=\"you_photo\" />\r\n                </div>\r\n                <div className=\"likes\">\r\n                    {photo.likes.count} <p className=\"like\">❤</p>\r\n                </div>\r\n            </div>\r\n        </li>\r\n    );\r\n};\r\n\r\nPhotoItem.propTypes = {\r\n    photo: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default PhotoItem;\r\n","import React from \"react\";\r\nimport \"./body.css\";\r\nimport PhotoItem from \"./body/PhotoItem\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Body = ({ page, user }) => {\r\n    const NO_PHOTOS = \"В этом году у вас не было новых фотографий...\";\r\n\r\n    console.log(\"Body page:\", page);\r\n\r\n    const onBtnYearClick = (e) => {\r\n        const _year = +e.currentTarget.innerText;\r\n        console.log(\"user.search_mid || user.mid\", user.search_mid || user.mid);\r\n        page.getPhotos(_year, user.search_mid || user.mid);\r\n    };\r\n\r\n    const onChange = (e) => {\r\n        const search_mid = e.currentTarget.value;\r\n        user.setSearchMID(search_mid);\r\n    };\r\n\r\n    return (\r\n        <div className=\"app__body container\">\r\n            <div className=\"top\">\r\n                <div className=\"top__filter\">\r\n                    <div className=\"top__filter__text\">\r\n                        <details>\r\n                            <div className=\"search_mid\">\r\n                                <label htmlFor=\"search_mid\">Введите id пользователя или группы (группу со знаком \"-\" в начале): </label>\r\n                                <input type=\"text\" name=\"search_mid\" id=\"search_mid\" onChange={onChange} />\r\n                            </div>\r\n                        </details>\r\n\r\n                        {!user.search_mid ? <p>Мой топ фото по годам</p> : <p>Топ фото по годам пользователя {user.search_mid}</p>}\r\n                    </div>\r\n                    <div className=\"top__filter__years\">\r\n                        <button className=\"btn btn-info btn_year\" onClick={onBtnYearClick}>\r\n                            2017\r\n                        </button>\r\n                        <button className=\"btn btn-info btn_year\" onClick={onBtnYearClick}>\r\n                            2018\r\n                        </button>\r\n                        <button className=\"btn btn-info btn_year\" onClick={onBtnYearClick}>\r\n                            2019\r\n                        </button>\r\n                        <button className=\"btn btn-info btn_year\" onClick={onBtnYearClick}>\r\n                            2020\r\n                        </button>\r\n                        <button className=\"btn btn-info btn_year\" onClick={onBtnYearClick}>\r\n                            2021\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"top__main\">\r\n                    <div className=\"top_main__year\">{`${page.year} год [${page.photos.length}]`}</div>\r\n\r\n                    <ul className=\"photo_list\">{page.photos.length > 0 ? page.photos.map((photo, i) => <PhotoItem key={photo.id} photo={photo} />) : <p className=\"no-photos\">{NO_PHOTOS}</p>}</ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nBody.propTypes = {\r\n    page: PropTypes.object.isRequired,\r\n    user: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Body;\r\n","export const GET_PHOTOS_REQUEST = \"PAGE/GET_PHOTOS_REQUEST\";\r\nexport const GET_PHOTOS_SUCCESS = \"PAGE/GET_PHOTOS_SUCCESS\";\r\nexport const GET_PHOTOS_FAIL = \"PAGE/GET_PHOTOS_FAIL\";\r\n\r\nexport const LOGIN_REQUEST = \"USER/LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"USER/LOGIN_SUCCESS\";\r\nexport const LOGIN_FAIL = \"USER/LOGIN_FAIL\";\r\n\r\nexport const LOGOUT_REQUEST = \"USER/LOGOUT_REQUEST\";\r\nexport const LOGOUT_SUCCESS = \"USER/LOGOUT_SUCCESS\";\r\nexport const LOGOUT_FAIL = \"USER/LOGOUT_FAIL\";\r\nexport const SET_SEARCH_MID = \"USER/SET_SEARCH_MID\";\r\n","import { GET_PHOTOS_REQUEST, GET_PHOTOS_SUCCESS, GET_PHOTOS_FAIL } from \"./actionTypes\";\r\n\r\nlet photosArr = [];\r\n\r\nexport const getPhotos = (year, mid) => {\r\n    return (dispatch) => {\r\n        photosArr = [];\r\n        dispatch({\r\n            type: GET_PHOTOS_REQUEST,\r\n            payload: year,\r\n        });\r\n\r\n        getMorePhotos(0, 200, year, dispatch, mid);\r\n    };\r\n};\r\nconst makeYearPhotos = (photos, selectedYear) => {\r\n    let createdYear,\r\n        yearPhotos = [];\r\n\r\n    photos.forEach((item) => {\r\n        createdYear = new Date(item.date * 1000).getFullYear();\r\n        if (createdYear === selectedYear) {\r\n            yearPhotos.push(item);\r\n        }\r\n    });\r\n\r\n    yearPhotos.sort((a, b) => b.likes.count - a.likes.count);\r\n\r\n    return yearPhotos;\r\n};\r\n\r\nconst getMorePhotos = (offset, count, year, dispatch, mid) => {\r\n    console.log(\"getMorePhotos mid: \", mid);\r\n    //eslint-disable-next-line no-undef\r\n    VK.Api.call(\"photos.getAll\", { owner_id: mid, extended: 1, count: count, offset: offset, v: \"5.80\" }, (r) => {\r\n        try {\r\n            photosArr = [...photosArr, ...r.response.items];\r\n            if (offset <= r.response.count) {\r\n                offset += 200; // максимальное количество фото которое можно получить за 1 запрос\r\n                getMorePhotos(offset, count, year, dispatch, mid);\r\n            } else {\r\n                let photos = makeYearPhotos(photosArr, year);\r\n                //cached = true;\r\n                dispatch({\r\n                    type: GET_PHOTOS_SUCCESS,\r\n                    payload: photos,\r\n                });\r\n            }\r\n        } catch (e) {\r\n            dispatch({\r\n                type: GET_PHOTOS_FAIL,\r\n                error: true,\r\n                payload: new Error(e),\r\n            });\r\n        }\r\n    });\r\n};\r\n","/*eslint-disable*/\r\nimport \"./openapi.js\";\r\nimport { XXXXXX } from \"./numberAPP\";\r\n\r\n/*Open API — система, которая предоставляет возможность легко авторизовывать пользователей ВКонтакте на Вашем сайте. Кроме этого, с согласия пользователей, Вы сможете получить доступ к информации об их друзьях, фотографиях, видеороликах и других данных ВКонтакте для более глубокой интеграции с Вашим проектом.\r\n\r\nВ рамках подключения к Open API создается приложение, которое позволяет использовать на Вашем сайте все текущие методы ВКонтакте API. Помимо этого, Open API упрощает регистрацию новых пользователей на Вашем сайте, если у них уже есть учетная запись ВКонтакте. ~~~(из оф документации)~~~*/\r\n\r\nVK.init({\r\n    apiId: 7719277,\r\n});\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport \"./App.css\";\r\n\r\nimport Header from \"./app/Header\";\r\nimport ErrorBoundary from \"../components/ErrorBoundary\";\r\nimport Body from \"./app/Body\";\r\n\r\n//actions\r\nimport { getPhotos } from \"../actions/pageActions\";\r\nimport { login, logout, setSearchMID } from \"../actions/userActions\";\r\n\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport \"../utils/VK_init\"; //F12\r\n\r\nfunction App({ user, login, logout, page, getPhotos, setSearchMID }) {\r\n    user.login = login;\r\n    user.logout = logout;\r\n    user.setSearchMID = setSearchMID;\r\n    page.getPhotos = getPhotos;\r\n\r\n    const need_to_log_in = \"Необходимо авторизоваться, чтобы продолжить...\";\r\n\r\n    return (\r\n        <ErrorBoundary>\r\n            <div className=\"App\">\r\n                <Header user={user} />\r\n                {user.isAuthorized ? <Body page={page} user={user} /> : <p className=\"need_to_log_in\">{need_to_log_in}</p>}\r\n            </div>\r\n        </ErrorBoundary>\r\n    );\r\n}\r\n\r\nApp.propTypes = {\r\n    user: PropTypes.object.isRequired,\r\n    page: PropTypes.object.isRequired,\r\n    getPhotos: PropTypes.func.isRequired,\r\n    login: PropTypes.func.isRequired,\r\n    logout: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (store) => ({ user: store.user, page: store.page });\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    getPhotos: (year, mid) => dispatch(getPhotos(year, mid)),\r\n    login: () => dispatch(login()),\r\n    logout: () => dispatch(logout()),\r\n    setSearchMID: (search_mid) => dispatch(setSearchMID(search_mid)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\r\n","import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAIL, SET_SEARCH_MID } from \"./actionTypes\";\r\n\r\nexport const login = () => {\r\n    return function (dispatch) {\r\n        dispatch({\r\n            type: LOGIN_REQUEST,\r\n        });\r\n        //eslint-disable-next-line no-undef\r\n        VK.Auth.login((r) => {\r\n            if (r.session) {\r\n                const username = r.session.user.first_name;\r\n                const mid = r.session.mid;\r\n                dispatch({\r\n                    type: LOGIN_SUCCESS,\r\n                    payload: {\r\n                        username: username,\r\n                        mid: mid,\r\n                    },\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: LOGIN_FAIL,\r\n                    error: true,\r\n                    payload: new Error(\"Ошибка авторизации\"),\r\n                });\r\n            }\r\n        }, 4); // запрос прав на доступ к photo\r\n    };\r\n};\r\n\r\nexport const logout = () => {\r\n    return function (dispatch) {\r\n        dispatch({\r\n            type: LOGOUT_REQUEST,\r\n        });\r\n        //eslint-disable-next-line no-undef\r\n        VK.Auth.logout((r) => {\r\n            if (r) {\r\n                dispatch({\r\n                    type: LOGOUT_SUCCESS,\r\n                });\r\n            } else {\r\n                dispatch({\r\n                    type: LOGOUT_FAIL,\r\n                    error: true,\r\n                    payload: new Error(\"LogOut ERROR\"),\r\n                });\r\n            }\r\n        });\r\n    };\r\n};\r\n\r\nexport const setSearchMID = (search_mid) => {\r\n    return function (dispatch) {\r\n        dispatch({\r\n            type: SET_SEARCH_MID,\r\n            payload: search_mid,\r\n        });\r\n    };\r\n};\r\n","import { LOGIN_REQUEST, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT_REQUEST, LOGOUT_SUCCESS, LOGOUT_FAIL, SET_SEARCH_MID } from \"../actions/actionTypes\";\r\n\r\nconst initialState = {\r\n    name: \"$�anon�mous��_�\",\r\n    mid: null,\r\n    search_mid: null,\r\n    isFetching: false,\r\n    isAuthorized: false,\r\n    error: \"\",\r\n};\r\n\r\nexport const userReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case LOGIN_REQUEST:\r\n            return { ...state, isAuthorized: false, isFetching: true, error: \"\" };\r\n        case LOGIN_SUCCESS:\r\n            return { ...state, isAuthorized: true, isFetching: false, name: action.payload.username, mid: action.payload.mid };\r\n        case LOGIN_FAIL:\r\n            return { ...state, isFetching: false, error: action.payload.message };\r\n        case LOGOUT_REQUEST:\r\n            return { ...state, isFetching: true, error: \"\" };\r\n        case LOGOUT_SUCCESS:\r\n            return { ...initialState };\r\n        case LOGOUT_FAIL:\r\n            return { ...state, isFetching: false, error: action.payload.message };\r\n        case SET_SEARCH_MID:\r\n            return { ...state, search_mid: action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { GET_PHOTOS_REQUEST, GET_PHOTOS_SUCCESS, GET_PHOTOS_FAIL } from \"../actions/actionTypes\";\r\n\r\nconst initialState = {\r\n    year: 2021,\r\n    photos: [],\r\n    isFetching: false,\r\n    error: \"\",\r\n};\r\n\r\nexport const pageReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case GET_PHOTOS_REQUEST:\r\n            return { ...state, year: action.payload, isFetching: true, photos: [] };\r\n\r\n        case GET_PHOTOS_SUCCESS:\r\n            return { ...state, photos: action.payload, isFetching: false };\r\n        case GET_PHOTOS_FAIL:\r\n            return { ...state, isFetching: false, error: action.payload.message };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { userReducer } from \"./user\";\r\nimport { pageReducer } from \"./page\";\r\n\r\nexport const rootReducer = combineReducers({ user: userReducer, page: pageReducer });\r\n","import { applyMiddleware, createStore } from \"redux\";\r\nimport { rootReducer } from \"../reducers/index\";\r\nimport logger from \"redux-logger\";\r\nimport thunk from \"redux-thunk\";\r\n//eslint-disable-next-line\r\nconst mw = (store) => (next) => (action) => {\r\n    console.log(\"mv store: \", store);\r\n    console.log(\"mv next: \", next);\r\n    console.log(\"mv action: \", action);\r\n    const hz = next(action);\r\n    console.log(\"mv hz: \", hz);\r\n    console.log(\"mv store: \", store);\r\n    return hz;\r\n};\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk, logger));\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport \"./index.css\";\nimport App from \"./containers/App\";\nimport { store } from \"./store/configureStore\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <Provider store={store}>\n            <App />\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}